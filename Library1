local ModMenu = {}
ModMenu.__index = ModMenu

-- –°–µ—Ä–≤–∏—Å—ã
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")
local Lighting = game:GetService("Lighting")

-- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
local PLAYER = Players.LocalPlayer
local IS_MOBILE = UserInputService.TouchEnabled
local IS_DESKTOP = UserInputService.MouseEnabled

-- –£—Ç–∏–ª–∏—Ç—ã
local function Create(className, properties)
    local obj = Instance.new(className)
    for prop, value in pairs(properties) do
        if prop ~= "Parent" then
            if pcall(function() return obj[prop] end) then
                obj[prop] = value
            end
        end
    end
    if properties.Parent then
        obj.Parent = properties.Parent
    end
    return obj
end

local function SafeTween(obj, properties, duration, easingStyle, easingDirection)
    if not obj or not obj.Parent then return nil end
    local tweenInfo = TweenInfo.new(duration or 0.2, easingStyle or Enum.EasingStyle.Quad, easingDirection or Enum.EasingDirection.Out)
    local tween = TweenService:Create(obj, tweenInfo, properties)
    tween:Play()
    return tween
end

local function Round(num, decimal)
    local mult = 10^(decimal or 0)
    return math.floor(num * mult + 0.5) / mult
end

local function DeepClone(t)
    local copy = {}
    for k, v in pairs(t) do
        if type(v) == "table" then
            copy[k] = DeepClone(v)
        else
            copy[k] = v
        end
    end
    return copy
end

-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å
function ModMenu.new(menuName)
    local self = setmetatable({}, ModMenu)
    
    self.MenuName = menuName or "ModMenu"
    self.Version = "3.2"
    self.GUI = nil
    self.Settings = {}
    self.Connections = {}
    self.Elements = {}
    self.Notifications = {}
    self.FloatingTexts = {}
    self.MenuOpen = false
    self.SettingsOpen = false
    self.Active = false
    
    self.MenuID = "Menu_" .. HttpService:GenerateGUID(false):sub(1, 8)
    
    -- –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –º–µ–Ω—é —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö
    self:CleanupOldMenus()
    self:Initialize()
    
    return self
end

-- –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –º–µ–Ω—é
function ModMenu:CleanupOldMenus()
    -- –£–¥–∞–ª—è–µ–º —Ç–æ–ª—å–∫–æ –º–µ–Ω—é —ç—Ç–æ–≥–æ –∏–≥—Ä–æ–∫–∞
    local playerMenus = {}
    for _, obj in ipairs(CoreGui:GetChildren()) do
        if obj.Name:find("Menu_") then
            table.insert(playerMenus, obj)
        end
    end
    
    if #playerMenus > 0 then
        for _, menu in ipairs(playerMenus) do
            menu:Destroy()
        end
    end
end

-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
function ModMenu:Initialize()
    -- –°–æ–∑–¥–∞–µ–º ScreenGui
    self.GUI = Create("ScreenGui", {
        Name = self.MenuID,
        Parent = CoreGui,
        DisplayOrder = 9999,
        ResetOnSpawn = false,
        IgnoreGuiInset = IS_MOBILE
    })
    
    -- –°–æ–∑–¥–∞–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
    self:CreateMainButton()
    self:CreateMainMenu()
    self:CreateSettingsWindow()
    self:CreateFloatingTexts()
    
    self.Active = true
    task.spawn(function()
        task.wait(0.5)
        self:Notify("–ú–µ–Ω—é –∑–∞–≥—Ä—É–∂–µ–Ω–æ! v" .. self.Version)
    end)
end

-- –°–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
function ModMenu:CreateMainButton()
    self.MainButton = Create("TextButton", {
        Parent = self.GUI,
        Text = "‚â°",
        Font = Enum.Font.GothamBold,
        TextSize = IS_MOBILE and 32 or 28,
        TextColor3 = Color3.new(1, 1, 1),
        BackgroundColor3 = Color3.fromRGB(40, 40, 50),
        BorderSizePixel = 0,
        Size = IS_MOBILE and UDim2.new(0, 60, 0, 60) or UDim2.new(0, 50, 0, 50),
        Position = UDim2.new(0, 20, 0.5, IS_MOBILE and -30 or -25),
        ZIndex = 1000,
        AutoButtonColor = false
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(1, 0),
        Parent = self.MainButton
    })
    
    Create("UIStroke", {
        Parent = self.MainButton,
        Color = Color3.fromRGB(100, 150, 255),
        Thickness = 2
    })
    
    -- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
    self:MakeDraggable(self.MainButton)
    
    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤
    local function OnMainButtonClick()
        self:ToggleMenu()
    end
    
    self.MainButton.MouseButton1Click:Connect(OnMainButtonClick)
    
    if IS_MOBILE then
        self.MainButton.TouchTap:Connect(OnMainButtonClick)
    end
    
    -- –≠—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ü–ö)
    if IS_DESKTOP then
        self.MainButton.MouseEnter:Connect(function()
            SafeTween(self.MainButton, {BackgroundColor3 = Color3.fromRGB(60, 60, 70)})
        end)
        
        self.MainButton.MouseLeave:Connect(function()
            SafeTween(self.MainButton, {BackgroundColor3 = Color3.fromRGB(40, 40, 50)})
        end)
    end
end

-- –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≤–∞—é—â–∏—Ö –Ω–∞–¥–ø–∏—Å–µ–π
function ModMenu:CreateFloatingTexts()
    for i = 1, 3 do  -- –£–º–µ–Ω—å—à–µ–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
        local floatText = Create("TextLabel", {
            Parent = self.GUI,
            Text = "–§–∞—Ç–∏–º–∞ ‚ô•Ô∏è",
            Font = Enum.Font.GothamBold,
            TextSize = IS_MOBILE and 20 or 24,
            TextColor3 = Color3.fromRGB(255, 100 + i * 30, 150 + i * 15),
            TextTransparency = 0.3,
            BackgroundTransparency = 1,
            Size = IS_MOBILE and UDim2.new(0, 120, 0, 35) or UDim2.new(0, 150, 0, 40),
            Position = UDim2.new(math.random() * 0.8, 0, math.random() * 0.8, 0),
            ZIndex = 900,
            Visible = false
        })
        
        table.insert(self.FloatingTexts, floatText)
        
        -- –ê–Ω–∏–º–∞—Ü–∏—è
        task.spawn(function()
            local startPos = floatText.Position
            local time = math.random() * 10
            local speed = 0.2 + math.random() * 0.3
            
            while floatText and floatText.Parent do
                if not self.MenuOpen and not self.SettingsOpen then
                    time += RunService.Heartbeat:Wait()
                    
                    local x = startPos.X.Offset + math.sin(time * speed) * 60
                    local y = startPos.Y.Offset + math.cos(time * speed * 0.7) * 40
                    
                    floatText.Position = UDim2.new(startPos.X.Scale, x, startPos.Y.Scale, y)
                    
                    -- –ú–µ—Ä—Ü–∞–Ω–∏–µ
                    floatText.TextTransparency = 0.2 + math.sin(time * 1.5) * 0.3
                else
                    task.wait(0.2)  -- –£–≤–µ–ª–∏—á–µ–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
                end
            end
        end)
    end
end

-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –Ω–∞–¥–ø–∏—Å–µ–π
function ModMenu:UpdateFloatingTexts()
    local visible = not (self.MenuOpen or self.SettingsOpen)
    for _, text in ipairs(self.FloatingTexts) do
        if text then
            text.Visible = visible
        end
    end
end

-- –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é
function ModMenu:CreateMainMenu()
    -- –ì–ª–∞–≤–Ω—ã–π —Ñ—Ä–µ–π–º
    self.MenuFrame = Create("Frame", {
        Parent = self.GUI,
        BackgroundColor3 = Color3.fromRGB(20, 20, 25),
        BackgroundTransparency = 0.05,
        BorderSizePixel = 0,
        Size = IS_MOBILE and UDim2.new(0.95, 0, 0.85, 0) or UDim2.new(0, 600, 0, 400),
        Position = IS_MOBILE and UDim2.new(0.025, 0, 0.075, 0) or UDim2.new(0.5, -300, 0.5, -200),
        Visible = false,
        ZIndex = 100
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(0, 12),
        Parent = self.MenuFrame
    })
    
    Create("UIStroke", {
        Parent = self.MenuFrame,
        Color = Color3.fromRGB(50, 50, 60),
        Thickness = 2
    })
    
    -- Title bar
    local titleBar = Create("Frame", {
        Parent = self.MenuFrame,
        BackgroundColor3 = Color3.fromRGB(30, 30, 40),
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 0, 45)
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(0, 12, 0, 0),
        Parent = titleBar
    })
    
    -- –ó–∞–≥–æ–ª–æ–≤–æ–∫
    Create("TextLabel", {
        Parent = titleBar,
        Text = self.MenuName .. " v" .. self.Version,
        Font = Enum.Font.GothamBold,
        TextSize = IS_MOBILE and 16 or 18,
        TextColor3 = Color3.new(1, 1, 1),
        BackgroundTransparency = 1,
        Size = UDim2.new(0, 200, 1, 0),
        Position = UDim2.new(0, 15, 0, 0),
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    -- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
    local closeBtn = Create("TextButton", {
        Parent = titleBar,
        Text = "‚úï",
        Font = Enum.Font.GothamBold,
        TextSize = IS_MOBILE and 22 or 24,
        TextColor3 = Color3.fromRGB(255, 100, 100),
        BackgroundTransparency = 1,
        Size = UDim2.new(0, 45, 1, 0),
        Position = UDim2.new(1, -45, 0, 0),
        AutoButtonColor = false
    })
    
    -- –ö–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
    local settingsBtn = Create("TextButton", {
        Parent = titleBar,
        Text = "‚öô",
        Font = Enum.Font.GothamBold,
        TextSize = IS_MOBILE and 16 or 18,
        TextColor3 = Color3.fromRGB(100, 150, 255),
        BackgroundTransparency = 1,
        Size = UDim2.new(0, 45, 1, 0),
        Position = UDim2.new(1, -90, 0, 0),
        AutoButtonColor = false
    })
    
    -- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
    self:MakeDraggable(self.MenuFrame, titleBar)
    
    -- –ö–æ–Ω—Ç–µ–Ω—Ç
    local content = Create("Frame", {
        Parent = self.MenuFrame,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 1, -45),
        Position = UDim2.new(0, 0, 0, 45)
    })
    
    -- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å (—Ç–∞–±—ã)
    self.LeftPanel = Create("ScrollingFrame", {
        Parent = content,
        BackgroundColor3 = Color3.fromRGB(25, 25, 35),
        BorderSizePixel = 0,
        Size = UDim2.new(0, 150, 1, 0),
        CanvasSize = UDim2.new(0, 0, 0, 0),
        ScrollBarThickness = IS_MOBILE and 5 or 3,
        ScrollBarImageColor3 = Color3.fromRGB(100, 150, 255)
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(0, 0, 0, 12),
        Parent = self.LeftPanel
    })
    
    local leftList = Create("UIListLayout", {
        Parent = self.LeftPanel,
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 5)
    })
    
    leftList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        self.LeftPanel.CanvasSize = UDim2.new(0, 0, 0, leftList.AbsoluteContentSize.Y + 10)
    end)
    
    -- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å (–∫–æ–Ω—Ç–µ–Ω—Ç)
    self.RightPanel = Create("ScrollingFrame", {
        Parent = content,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, -160, 1, 0),
        Position = UDim2.new(0, 160, 0, 0),
        CanvasSize = UDim2.new(0, 0, 0, 0),
        ScrollBarThickness = IS_MOBILE and 5 or 3,
        ScrollBarImageColor3 = Color3.fromRGB(100, 150, 255)
    })
    
    local rightList = Create("UIListLayout", {
        Parent = self.RightPanel,
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 10)
    })
    
    Create("UIPadding", {
        Parent = self.RightPanel,
        PaddingLeft = UDim.new(0, 10),
        PaddingRight = UDim.new(0, 10),
        PaddingTop = UDim.new(0, 10),
        PaddingBottom = UDim.new(0, 10)
    })
    
    rightList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        self.RightPanel.CanvasSize = UDim2.new(0, 0, 0, rightList.AbsoluteContentSize.Y + 20)
    end)
    
    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
    local function OnCloseClick()
        self:ToggleMenu()
    end
    
    local function OnSettingsClick()
        self:ToggleSettings()
    end
    
    closeBtn.MouseButton1Click:Connect(OnCloseClick)
    settingsBtn.MouseButton1Click:Connect(OnSettingsClick)
    
    if IS_MOBILE then
        closeBtn.TouchTap:Connect(OnCloseClick)
        settingsBtn.TouchTap:Connect(OnSettingsClick)
    end
    
    -- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –∫–Ω–æ–ø–æ–∫
    if IS_DESKTOP then
        closeBtn.MouseEnter:Connect(function()
            closeBtn.TextColor3 = Color3.fromRGB(255, 150, 150)
        end)
        
        closeBtn.MouseLeave:Connect(function()
            closeBtn.TextColor3 = Color3.fromRGB(255, 100, 100)
        end)
        
        settingsBtn.MouseEnter:Connect(function()
            settingsBtn.TextColor3 = Color3.fromRGB(150, 200, 255)
        end)
        
        settingsBtn.MouseLeave:Connect(function()
            settingsBtn.TextColor3 = Color3.fromRGB(100, 150, 255)
        end)
    end
    
    -- –î–æ–±–∞–≤–ª—è–µ–º –±–∞–∑–æ–≤—ã–µ —Ç–∞–±—ã
    self:AddDefaultTabs()
end

-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
function ModMenu:AddDefaultTabs()
    local tabs = {
        {"–ì–ª–∞–≤–Ω–∞—è", "üè†"},
        {"–ò–≥—Ä–æ–∫", "üë§"},
        {"–í–∏–∑—É–∞–ª", "üëÅÔ∏è"},
        {"–ú–∏—Ä", "üåç"},
        {"–î—Ä—É–≥–æ–µ", "‚öôÔ∏è"}
    }
    
    for i, tabData in ipairs(tabs) do
        self:AddTab(tabData[1], tabData[2])
    end
end

-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–∞
function ModMenu:AddTab(name, icon)
    -- –ö–Ω–æ–ø–∫–∞ —Ç–∞–±–∞
    local tabButton = Create("TextButton", {
        Name = name .. "Tab",
        Parent = self.LeftPanel,
        Text = "   " .. icon .. " " .. name,
        Font = Enum.Font.Gotham,
        TextSize = IS_MOBILE and 13 or 14,
        TextColor3 = Color3.new(1, 1, 1),
        TextXAlignment = Enum.TextXAlignment.Left,
        BackgroundColor3 = Color3.fromRGB(40, 40, 50),
        BorderSizePixel = 0,
        Size = UDim2.new(1, -10, 0, IS_MOBILE and 40 or 35),
        LayoutOrder = #self.LeftPanel:GetChildren(),
        AutoButtonColor = false
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = tabButton
    })
    
    -- –ö–æ–Ω—Ç–µ–Ω—Ç —Ç–∞–±–∞
    local contentFrame = Create("Frame", {
        Name = name .. "Content",
        Parent = self.RightPanel,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 0, 0),
        LayoutOrder = #self.RightPanel:GetChildren(),
        Visible = false
    })
    
    local contentList = Create("UIListLayout", {
        Parent = contentFrame,
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 10)
    })
    
    contentList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        contentFrame.Size = UDim2.new(1, 0, 0, contentList.AbsoluteContentSize.Y)
    end)
    
    -- –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–π —Ç–∞–±
    if #self.LeftPanel:GetChildren() == 1 then
        tabButton.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
        contentFrame.Visible = true
        self.ActiveTab = name
    end
    
    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
    local function OnTabClick()
        -- –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ —Ç–∞–±—ã
        for _, child in ipairs(self.LeftPanel:GetChildren()) do
            if child:IsA("TextButton") then
                SafeTween(child, {BackgroundColor3 = Color3.fromRGB(40, 40, 50)})
            end
        end
        
        -- –°–∫—Ä—ã–≤–∞–µ–º –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç
        for _, child in ipairs(self.RightPanel:GetChildren()) do
            if child:IsA("Frame") then
                child.Visible = false
            end
        end
        
        -- –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π
        SafeTween(tabButton, {BackgroundColor3 = Color3.fromRGB(100, 150, 255)})
        contentFrame.Visible = true
        self.ActiveTab = name
    end
    
    tabButton.MouseButton1Click:Connect(OnTabClick)
    
    if IS_MOBILE then
        tabButton.TouchTap:Connect(OnTabClick)
    end
    
    -- –≠—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ü–ö)
    if IS_DESKTOP then
        tabButton.MouseEnter:Connect(function()
            if self.ActiveTab ~= name then
                SafeTween(tabButton, {BackgroundColor3 = Color3.fromRGB(50, 50, 60)})
            end
        end)
        
        tabButton.MouseLeave:Connect(function()
            if self.ActiveTab ~= name then
                SafeTween(tabButton, {BackgroundColor3 = Color3.fromRGB(40, 40, 50)})
            end
        end)
    end
    
    return contentFrame
end

-- –°–æ–∑–¥–∞–Ω–∏–µ –æ–∫–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
function ModMenu:CreateSettingsWindow()
    self.SettingsFrame = Create("Frame", {
        Parent = self.GUI,
        BackgroundColor3 = Color3.fromRGB(20, 20, 25),
        BackgroundTransparency = 0.05,
        BorderSizePixel = 0,
        Size = IS_MOBILE and UDim2.new(0.95, 0, 0.9, 0) or UDim2.new(0, 700, 0, 500),
        Position = IS_MOBILE and UDim2.new(0.025, 0, 0.05, 0) or UDim2.new(0.5, -350, 0.5, -250),
        Visible = false,
        ZIndex = 200
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(0, 12),
        Parent = self.SettingsFrame
    })
    
    Create("UIStroke", {
        Parent = self.SettingsFrame,
        Color = Color3.fromRGB(50, 50, 60),
        Thickness = 2
    })
    
    -- Title bar
    local titleBar = Create("Frame", {
        Parent = self.SettingsFrame,
        BackgroundColor3 = Color3.fromRGB(30, 30, 40),
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 0, 45)
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(0, 12, 0, 0),
        Parent = titleBar
    })
    
    Create("TextLabel", {
        Parent = titleBar,
        Text = "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
        Font = Enum.Font.GothamBold,
        TextSize = IS_MOBILE and 16 or 18,
        TextColor3 = Color3.new(1, 1, 1),
        BackgroundTransparency = 1,
        Size = UDim2.new(0, 200, 1, 0),
        Position = UDim2.new(0, 15, 0, 0),
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local closeBtn = Create("TextButton", {
        Parent = titleBar,
        Text = "‚úï",
        Font = Enum.Font.GothamBold,
        TextSize = IS_MOBILE and 22 or 24,
        TextColor3 = Color3.fromRGB(255, 100, 100),
        BackgroundTransparency = 1,
        Size = UDim2.new(0, 45, 1, 0),
        Position = UDim2.new(1, -45, 0, 0),
        AutoButtonColor = false
    })
    
    -- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
    self:MakeDraggable(self.SettingsFrame, titleBar)
    
    -- –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫
    local content = Create("ScrollingFrame", {
        Parent = self.SettingsFrame,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 1, -45),
        Position = UDim2.new(0, 0, 0, 45),
        CanvasSize = UDim2.new(0, 0, 0, 0),
        ScrollBarThickness = IS_MOBILE and 5 or 3,
        ScrollBarImageColor3 = Color3.fromRGB(100, 150, 255)
    })
    
    Create("UIPadding", {
        Parent = content,
        PaddingLeft = UDim.new(0, 15),
        PaddingRight = UDim.new(0, 15),
        PaddingTop = UDim.new(0, 15),
        PaddingBottom = UDim.new(0, 15)
    })
    
    local list = Create("UIListLayout", {
        Parent = content,
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 15)
    })
    
    list:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        content.CanvasSize = UDim2.new(0, 0, 0, list.AbsoluteContentSize.Y + 20)
    end)
    
    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–∫—Ä—ã—Ç–∏—è
    local function OnCloseClick()
        self:ToggleSettings()
    end
    
    closeBtn.MouseButton1Click:Connect(OnCloseClick)
    
    if IS_MOBILE then
        closeBtn.TouchTap:Connect(OnCloseClick)
    end
    
    -- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
    if IS_DESKTOP then
        closeBtn.MouseEnter:Connect(function()
            closeBtn.TextColor3 = Color3.fromRGB(255, 150, 150)
        end)
        
        closeBtn.MouseLeave:Connect(function()
            closeBtn.TextColor3 = Color3.fromRGB(255, 100, 100)
        end)
    end
    
    -- –°–æ–∑–¥–∞–µ–º —Å–µ–∫—Ü–∏–∏
    self:CreateSettingsSections(content)
end

-- –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ü–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–∫
function ModMenu:CreateSettingsSections(container)
    -- –¶–≤–µ—Ç–∞ –º–µ–Ω—é
    local colorsSection = self:CreateSection("–¶–≤–µ—Ç–∞ –º–µ–Ω—é", container)
    self:ColorPicker(colorsSection, "–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç", Color3.fromRGB(100, 150, 255), function(color)
        self:Notify("–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç –∏–∑–º–µ–Ω–µ–Ω")
    end)
    
    self:Slider(colorsSection, "–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å", 0, 100, 5, 1, function(value)
        local transparency = value / 100
        self.MenuFrame.BackgroundTransparency = transparency
        self.SettingsFrame.BackgroundTransparency = transparency
    end)
    
    -- –ò–≥—Ä–æ–∫
    local playerSection = self:CreateSection("–ò–≥—Ä–æ–∫", container)
    self.ImmortalityToggle = self:Toggle(playerSection, "–ë–µ—Å—Å–º–µ—Ä—Ç–∏–µ", false, function(value)
        if PLAYER.Character then
            local humanoid = PLAYER.Character:FindFirstChild("Humanoid")
            if humanoid then
                humanoid.Health = value and math.huge or 100
            end
        end
        self:Notify("–ë–µ—Å—Å–º–µ—Ä—Ç–∏–µ: " .. (value and "–í–ö–õ" or "–í–´–ö–õ"))
    end)
    
    self.SpeedSlider = self:Slider(playerSection, "–°–∫–æ—Ä–æ—Å—Ç—å", 16, 500, 16, 1, function(value)
        if PLAYER.Character then
            local humanoid = PLAYER.Character:FindFirstChild("Humanoid")
            if humanoid then
                humanoid.WalkSpeed = value
            end
        end
    end)
    
    -- –í–∏–∑—É–∞–ª
    local visualSection = self:CreateSection("–í–∏–∑—É–∞–ª", container)
    self:Toggle(visualSection, "–ü–æ–ª–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ", false, function(value)
        Lighting.GlobalShadows = not value
        Lighting.ClockTime = value and 14 or 12
        self:Notify("–ü–æ–ª–Ω–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ: " .. (value and "–í–ö–õ" or "–í–´–ö–õ"))
    end)
    
    self:Slider(visualSection, "–Ø—Ä–∫–æ—Å—Ç—å", 0, 10, 1, 0.1, function(value)
        Lighting.Brightness = value
    end)
    
    -- –í—ã–±–æ—Ä –∏–≥—Ä–æ–∫–æ–≤
    local playersSection = self:CreateSection("–ò–≥—Ä–æ–∫–∏", container)
    local playerList = {}
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= PLAYER then
            table.insert(playerList, player.Name)
        end
    end
    
    if #playerList > 0 then
        self.PlayerDropdown = self:Dropdown(playersSection, "–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä–æ–∫–∞", playerList, playerList[1], function(value)
            self.SelectedPlayer = value
            self:Notify("–í—ã–±—Ä–∞–Ω –∏–≥—Ä–æ–∫: " .. value)
        end)
    else
        Create("TextLabel", {
            Parent = playersSection,
            Text = "–ù–µ—Ç –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤",
            Font = Enum.Font.Gotham,
            TextSize = 14,
            TextColor3 = Color3.new(0.7, 0.7, 0.7),
            BackgroundTransparency = 1,
            Size = UDim2.new(1, 0, 0, 30),
            TextXAlignment = Enum.TextXAlignment.Center
        })
    end
    
    -- –ü—Ä–µ–¥–º–µ—Ç—ã
    local itemsSection = self:CreateSection("–ü—Ä–µ–¥–º–µ—Ç—ã", container)
    local items = {"–ú–µ—á", "–©–∏—Ç", "–ó–µ–ª—å–µ", "–ö–ª—é—á", "–°—É–Ω–¥—É–∫"}
    self.ItemDropdown = self:Dropdown(itemsSection, "–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç", items, items[1], function(value)
        self.SelectedItem = value
        self:Notify("–í—ã–±—Ä–∞–Ω –ø—Ä–µ–¥–º–µ—Ç: " .. value)
    end)
end

-- UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

-- –°–µ–∫—Ü–∏—è
function ModMenu:CreateSection(title, parent)
    local section = Create("Frame", {
        Parent = parent,
        BackgroundColor3 = Color3.fromRGB(30, 30, 35),
        BackgroundTransparency = 0.1,
        Size = UDim2.new(1, 0, 0, 0),
        LayoutOrder = #parent:GetChildren()
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(0, 8),
        Parent = section
    })
    
    Create("UIStroke", {
        Parent = section,
        Color = Color3.fromRGB(50, 50, 60),
        Thickness = 1
    })
    
    Create("UIPadding", {
        Parent = section,
        PaddingLeft = UDim.new(0, 15),
        PaddingRight = UDim.new(0, 15),
        PaddingTop = UDim.new(0, 10),
        PaddingBottom = UDim.new(0, 10)
    })
    
    Create("TextLabel", {
        Parent = section,
        Text = title,
        Font = Enum.Font.GothamBold,
        TextSize = IS_MOBILE and 15 or 16,
        TextColor3 = Color3.new(1, 1, 1),
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 0, IS_MOBILE and 28 or 25),
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local list = Create("UIListLayout", {
        Parent = section,
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 8)
    })
    
    list:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        section.Size = UDim2.new(1, 0, 0, list.AbsoluteContentSize.Y + 35)
    end)
    
    return section
end

-- –ö–Ω–æ–ø–∫–∞
function ModMenu:Btn(parent, text, callback)
    local button = Create("TextButton", {
        Parent = parent,
        Text = text,
        Font = Enum.Font.Gotham,
        TextSize = IS_MOBILE and 14 or 14,
        TextColor3 = Color3.new(1, 1, 1),
        BackgroundColor3 = Color3.fromRGB(100, 150, 255),
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 0, IS_MOBILE and 40 or 35),
        LayoutOrder = #parent:GetChildren(),
        AutoButtonColor = false
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = button
    })
    
    Create("UIStroke", {
        Parent = button,
        Color = Color3.fromRGB(80, 130, 235),
        Thickness = 1
    })
    
    -- Ripple —ç—Ñ—Ñ–µ–∫—Ç
    local function CreateRipple(input)
        local ripple = Create("Frame", {
            Parent = button,
            BackgroundColor3 = Color3.new(1, 1, 1),
            BackgroundTransparency = 0.7,
            Size = UDim2.new(0, 0, 0, 0),
            Position = IS_MOBILE and UDim2.new(0, input.Position.X - button.AbsolutePosition.X, 0, input.Position.Y - button.AbsolutePosition.Y) or UDim2.new(0.5, 0, 0.5, 0),
            AnchorPoint = IS_MOBILE and Vector2.new(0, 0) or Vector2.new(0.5, 0.5),
            ZIndex = 100
        })
        
        Create("UICorner", {
            CornerRadius = UDim.new(1, 0),
            Parent = ripple
        })
        
        SafeTween(ripple, {Size = UDim2.new(2, 0, 2, 0), BackgroundTransparency = 1}, 0.5)
        
        task.spawn(function()
            task.wait(0.5)
            if ripple and ripple.Parent then
                ripple:Destroy()
            end
        end)
    end
    
    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫
    local function OnClick()
        if callback then
            local success, err = pcall(callback)
            if not success then
                warn("–û—à–∏–±–∫–∞ –≤ –∫–Ω–æ–ø–∫–µ: " .. tostring(err))
                self:Notify("–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è", 2)
            end
        end
    end
    
    local function OnInputBegan(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or 
           input.UserInputType == Enum.UserInputType.Touch then
            CreateRipple(input)
            OnClick()
        end
    end
    
    button.InputBegan:Connect(OnInputBegan)
    
    -- –≠—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ü–ö)
    if IS_DESKTOP then
        button.MouseEnter:Connect(function()
            SafeTween(button, {BackgroundColor3 = Color3.fromRGB(120, 170, 255)})
        end)
        
        button.MouseLeave:Connect(function()
            SafeTween(button, {BackgroundColor3 = Color3.fromRGB(100, 150, 255)})
        end)
    end
    
    return button
end

-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å (–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô)
function ModMenu:Toggle(parent, text, state, callback)
    local toggleContainer = Create("Frame", {
        Parent = parent,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 0, IS_MOBILE and 35 or 30),
        LayoutOrder = #parent:GetChildren()
    })
    
    local label = Create("TextLabel", {
        Parent = toggleContainer,
        Text = text,
        Font = Enum.Font.Gotham,
        TextSize = IS_MOBILE and 14 or 14,
        TextColor3 = Color3.new(1, 1, 1),
        BackgroundTransparency = 1,
        Size = UDim2.new(0.7, 0, 1, 0),
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local toggleButton = Create("TextButton", {
        Parent = toggleContainer,
        Text = "",
        BackgroundColor3 = state and Color3.fromRGB(100, 150, 255) or Color3.fromRGB(60, 60, 70),
        BorderSizePixel = 0,
        Size = UDim2.new(0, IS_MOBILE and 55 : 50, 0, IS_MOBILE and 30 : 25),
        Position = UDim2.new(1, IS_MOBILE and -55 : -50, 0.5, IS_MOBILE and -15 : -12.5),
        AutoButtonColor = false
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(1, 0),
        Parent = toggleButton
    })
    
    Create("UIStroke", {
        Parent = toggleButton,
        Color = Color3.fromRGB(40, 40, 50),
        Thickness = 1
    })
    
    local dot = Create("Frame", {
        Parent = toggleButton,
        BackgroundColor3 = Color3.new(1, 1, 1),
        Size = UDim2.new(0, IS_MOBILE and 24 : 19, 0, IS_MOBILE and 24 : 19),
        Position = state and UDim2.new(1, IS_MOBILE and -27 : -22, 0.5, IS_MOBILE and -12 : -9.5) or UDim2.new(0, IS_MOBILE and 3 : 3, 0.5, IS_MOBILE and -12 : -9.5),
        AnchorPoint = state and Vector2.new(1, 0.5) or Vector2.new(0, 0.5)
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(1, 0),
        Parent = dot
    })
    
    -- –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
    local function ToggleState()
        state = not state
        
        if state then
            SafeTween(dot, {Position = UDim2.new(1, IS_MOBILE and -27 : -22, 0.5, IS_MOBILE and -12 : -9.5)})
            SafeTween(toggleButton, {BackgroundColor3 = Color3.fromRGB(100, 150, 255)})
        else
            SafeTween(dot, {Position = UDim2.new(0, IS_MOBILE and 3 : 3, 0.5, IS_MOBILE and -12 : -9.5)})
            SafeTween(toggleButton, {BackgroundColor3 = Color3.fromRGB(60, 60, 70)})
        end
        
        if callback then
            local success, err = pcall(callback, state)
            if not success then
                warn("–û—à–∏–±–∫–∞ –≤ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ: " .. tostring(err))
                self:Notify("–û—à–∏–±–∫–∞ –≤ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ", 2)
            end
        end
    end
    
    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    local function OnToggleClick()
        ToggleState()
    end
    
    toggleButton.MouseButton1Click:Connect(OnToggleClick)
    label.MouseButton1Click:Connect(OnToggleClick)
    
    if IS_MOBILE then
        toggleButton.TouchTap:Connect(OnToggleClick)
        label.TouchTap:Connect(OnToggleClick)
    end
    
    -- –≠—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ü–ö)
    if IS_DESKTOP then
        toggleButton.MouseEnter:Connect(function()
            if state then
                SafeTween(toggleButton, {BackgroundColor3 = Color3.fromRGB(120, 170, 255)})
            else
                SafeTween(toggleButton, {BackgroundColor3 = Color3.fromRGB(80, 80, 90)})
            end
        end)
        
        toggleButton.MouseLeave:Connect(function()
            if state then
                SafeTween(toggleButton, {BackgroundColor3 = Color3.fromRGB(100, 150, 255)})
            else
                SafeTween(toggleButton, {BackgroundColor3 = Color3.fromRGB(60, 60, 70)})
            end
        end)
    end
    
    return {
        Update = function(value)
            state = value
            if state then
                dot.Position = UDim2.new(1, IS_MOBILE and -27 : -22, 0.5, IS_MOBILE and -12 : -9.5)
                toggleButton.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
            else
                dot.Position = UDim2.new(0, IS_MOBILE and 3 : 3, 0.5, IS_MOBILE and -12 : -9.5)
                toggleButton.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
            end
        end,
        GetState = function() return state end
    }
end

-- –°–ª–∞–π–¥–µ—Ä (–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–∂–∞—Ç–∏–µ)
function ModMenu:Slider(parent, text, min, max, value, step, callback)
    local sliderContainer = Create("Frame", {
        Parent = parent,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 0, IS_MOBILE and 60 : 50),
        LayoutOrder = #parent:GetChildren()
    })
    
    local top = Create("Frame", {
        Parent = sliderContainer,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 0, IS_MOBILE and 25 : 20)
    })
    
    Create("TextLabel", {
        Parent = top,
        Text = text,
        Font = Enum.Font.Gotham,
        TextSize = IS_MOBILE and 14 : 14,
        TextColor3 = Color3.new(1, 1, 1),
        BackgroundTransparency = 1,
        Size = UDim2.new(0.7, 0, 1, 0),
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local valueLabel = Create("TextLabel", {
        Parent = top,
        Text = tostring(value),
        Font = Enum.Font.Gotham,
        TextSize = IS_MOBILE and 14 : 14,
        TextColor3 = Color3.fromRGB(100, 150, 255),
        BackgroundTransparency = 1,
        Size = UDim2.new(0.3, 0, 1, 0),
        Position = UDim2.new(0.7, 0, 0, 0),
        TextXAlignment = Enum.TextXAlignment.Right
    })
    
    local track = Create("Frame", {
        Parent = sliderContainer,
        BackgroundColor3 = Color3.fromRGB(60, 60, 70),
        Size = UDim2.new(1, 0, 0, IS_MOBILE and 8 : 6),
        Position = UDim2.new(0, 0, 1, IS_MOBILE and -20 : -16)
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(1, 0),
        Parent = track
    })
    
    Create("UIStroke", {
        Parent = track,
        Color = Color3.fromRGB(40, 40, 50),
        Thickness = 1
    })
    
    local fill = Create("Frame", {
        Parent = track,
        BackgroundColor3 = Color3.fromRGB(100, 150, 255),
        Size = UDim2.new((value - min) / (max - min), 0, 1, 0)
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(1, 0),
        Parent = fill
    })
    
    local thumb = Create("Frame", {
        Parent = track,
        BackgroundColor3 = Color3.new(1, 1, 1),
        Size = UDim2.new(0, IS_MOBILE and 20 : 16, 0, IS_MOBILE and 20 : 16),
        Position = UDim2.new((value - min) / (max - min), IS_MOBILE and -10 : -8, 0.5, IS_MOBILE and -10 : -8),
        ZIndex = 2
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(1, 0),
        Parent = thumb
    })
    
    Create("UIStroke", {
        Parent = thumb,
        Color = Color3.fromRGB(80, 130, 235),
        Thickness = 2
    })
    
    -- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    local function UpdateValue(newValue)
        newValue = math.clamp(newValue, min, max)
        if step then
            newValue = math.floor(newValue / step + 0.5) * step
        end
        
        value = newValue
        valueLabel.Text = tostring(value)
        
        local percent = (value - min) / (max - min)
        fill.Size = UDim2.new(percent, 0, 1, 0)
        thumb.Position = UDim2.new(percent, IS_MOBILE and -10 : -8, 0.5, IS_MOBILE and -10 : -8)
        
        if callback then
            local success, err = pcall(callback, value)
            if not success then
                warn("–û—à–∏–±–∫–∞ –≤ —Å–ª–∞–π–¥–µ—Ä–µ: " .. tostring(err))
                self:Notify("–û—à–∏–±–∫–∞ –≤ —Å–ª–∞–π–¥–µ—Ä–µ", 2)
            end
        end
    end
    
    -- –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
    local dragging = false
    
    local function UpdateFromInput(input)
        local inputPos
        if input.UserInputType == Enum.UserInputType.Touch then
            inputPos = input.Position
        else
            inputPos = input.Position
        end
        
        local trackPos = track.AbsolutePosition
        local trackSize = track.AbsoluteSize
        
        local relativeX = (inputPos.X - trackPos.X) / trackSize.X
        relativeX = math.clamp(relativeX, 0, 1)
        
        local newValue = min + relativeX * (max - min)
        UpdateValue(newValue)
    end
    
    -- –ù–∞—á–∞–ª–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
    local function StartDrag(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or 
           input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            UpdateFromInput(input)
            
            -- –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏
            SafeTween(thumb, {Size = UDim2.new(0, IS_MOBILE and 24 : 20, 0, IS_MOBILE and 24 : 20)})
            SafeTween(thumb, {Position = UDim2.new((value - min) / (max - min), IS_MOBILE and -12 : -10, 0.5, IS_MOBILE and -12 : -10)})
        end
    end
    
    -- –ö–æ–Ω–µ—Ü –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è (–ò–°–ü–†–ê–í–õ–ï–ù–û)
    local function EndDrag(input)
        if (input.UserInputType == Enum.UserInputType.MouseButton1 or 
            input.UserInputType == Enum.UserInputType.Touch) and dragging then
            dragging = false
            
            -- –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–∞–∑–º–µ—Ä
            SafeTween(thumb, {Size = UDim2.new(0, IS_MOBILE and 20 : 16, 0, IS_MOBILE and 20 : 16)})
            SafeTween(thumb, {Position = UDim2.new((value - min) / (max - min), IS_MOBILE and -10 : -8, 0.5, IS_MOBILE and -10 : -8)})
        end
    end
    
    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ç—Ä–µ–∫–∞
    track.InputBegan:Connect(StartDrag)
    thumb.InputBegan:Connect(StartDrag)
    
    -- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–æ–Ω—Ü–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
    local function OnInputEnded(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or 
           input.UserInputType == Enum.UserInputType.Touch then
            EndDrag(input)
        end
    end
    
    UserInputService.InputEnded:Connect(OnInputEnded)
    
    -- –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è
    local mouseMoveConnection = UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or 
           input.UserInputType == Enum.UserInputType.Touch) then
            UpdateFromInput(input)
        end
    end)
    
    table.insert(self.Connections, mouseMoveConnection)
    
    -- Touch –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
    if IS_MOBILE then
        track.TouchTap:Connect(function(input)
            UpdateFromInput(input)
        end)
    end
    
    return {
        Update = UpdateValue,
        GetValue = function() return value end
    }
end

-- –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ (–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
function ModMenu:Dropdown(parent, text, options, defaultValue, callback)
    local dropdownContainer = Create("Frame", {
        Parent = parent,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 0, IS_MOBILE and 40 : 30),
        LayoutOrder = #parent:GetChildren(),
        ClipsDescendants = false
    })
    
    Create("TextLabel", {
        Parent = dropdownContainer,
        Text = text,
        Font = Enum.Font.Gotham,
        TextSize = IS_MOBILE and 14 : 14,
        TextColor3 = Color3.new(1, 1, 1),
        BackgroundTransparency = 1,
        Size = UDim2.new(0.7, 0, 1, 0),
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local button = Create("TextButton", {
        Parent = dropdownContainer,
        Text = defaultValue or (options[1] or "–í—ã–±–µ—Ä–∏—Ç–µ..."),
        Font = Enum.Font.Gotham,
        TextSize = IS_MOBILE and 13 : 14,
        TextColor3 = Color3.new(1, 1, 1),
        BackgroundColor3 = Color3.fromRGB(60, 60, 70),
        BorderSizePixel = 0,
        Size = UDim2.new(0.3, 0, 1, 0),
        Position = UDim2.new(0.7, 0, 0, 0),
        AutoButtonColor = false,
        ZIndex = 10
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(0, 4),
        Parent = button
    })
    
    Create("UIStroke", {
        Parent = button,
        Color = Color3.fromRGB(40, 40, 50),
        Thickness = 1
    })
    
    local dropdownFrame = Create("ScrollingFrame", {
        Parent = self.GUI,  -- –í–∞–∂–Ω–æ: —Ä–æ–¥–∏—Ç–µ–ª—å - GUI, –∞ –Ω–µ container
        BackgroundColor3 = Color3.fromRGB(40, 40, 50),
        BorderSizePixel = 0,
        Size = UDim2.new(0.3, 0, 0, 0),
        Position = UDim2.new(0, 0, 0, 0),
        CanvasSize = UDim2.new(0, 0, 0, 0),
        ScrollBarThickness = IS_MOBILE and 5 : 3,
        ScrollBarImageColor3 = Color3.fromRGB(100, 150, 255),
        Visible = false,
        ZIndex = 10000,
        ClipsDescendants = true
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(0, 4),
        Parent = dropdownFrame
    })
    
    Create("UIStroke", {
        Parent = dropdownFrame,
        Color = Color3.fromRGB(60, 60, 70),
        Thickness = 1
    })
    
    local listLayout = Create("UIListLayout", {
        Parent = dropdownFrame,
        SortOrder = Enum.SortOrder.LayoutOrder
    })
    
    listLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        dropdownFrame.CanvasSize = UDim2.new(0, 0, 0, listLayout.AbsoluteContentSize.Y)
    end)
    
    -- –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—Ü–∏–∏
    for i, option in ipairs(options) do
        local optionButton = Create("TextButton", {
            Parent = dropdownFrame,
            Text = option,
            Font = Enum.Font.Gotham,
            TextSize = IS_MOBILE and 12 : 12,
            TextColor3 = Color3.new(1, 1, 1),
            BackgroundColor3 = Color3.fromRGB(50, 50, 60),
            BorderSizePixel = 0,
            Size = UDim2.new(1, 0, 0, IS_MOBILE and 30 : 25),
            LayoutOrder = i,
            AutoButtonColor = false,
            ZIndex = 10001
        })
        
        Create("UICorner", {
            CornerRadius = UDim.new(0, 2),
            Parent = optionButton
        })
        
        optionButton.MouseButton1Click:Connect(function()
            button.Text = option
            if callback then
                local success, err = pcall(callback, option)
                if not success then
                    warn("–û—à–∏–±–∫–∞ –≤ dropdown: " .. tostring(err))
                    self:Notify("–û—à–∏–±–∫–∞ –≤ –≤—ã–±–æ—Ä–µ", 2)
                end
            end
            dropdownFrame.Visible = false
        end)
        
        -- –≠—Ñ—Ñ–µ–∫—Ç—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è –ü–ö)
        if IS_DESKTOP then
            optionButton.MouseEnter:Connect(function()
                optionButton.BackgroundColor3 = Color3.fromRGB(70, 70, 80)
            end)
            
            optionButton.MouseLeave:Connect(function()
                optionButton.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
            end)
        end
    end
    
    -- –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
    local function ToggleDropdown()
        dropdownFrame.Visible = not dropdownFrame.Visible
        
        if dropdownFrame.Visible then
            -- –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º dropdown –ø–æ–¥ –∫–Ω–æ–ø–∫–æ–π
            local buttonPos = button.AbsolutePosition
            local buttonSize = button.AbsoluteSize
            
            dropdownFrame.Position = UDim2.new(0, buttonPos.X, 0, buttonPos.Y + buttonSize.Y + 5)
            
            -- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É —Ä–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–µ
            dropdownFrame.Size = UDim2.new(0, buttonSize.X, 0, math.min(listLayout.AbsoluteContentSize.Y, 150))
        end
    end
    
    button.MouseButton1Click:Connect(ToggleDropdown)
    
    if IS_MOBILE then
        button.TouchTap:Connect(ToggleDropdown)
    end
    
    -- –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ
    local closeConnection = UserInputService.InputBegan:Connect(function(input)
        if dropdownFrame.Visible and (input.UserInputType == Enum.UserInputType.MouseButton1 or 
           input.UserInputType == Enum.UserInputType.Touch) then
            
            local mousePos = input.Position
            local framePos = dropdownFrame.AbsolutePosition
            local frameSize = dropdownFrame.AbsoluteSize
            
            -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∫–ª–∏–∫–Ω—É–ª–∏ –ª–∏ –Ω–∞ —Å–∞–º—É –∫–Ω–æ–ø–∫—É
            local buttonPos = button.AbsolutePosition
            local buttonSize = button.AbsoluteSize
            
            local isButtonClick = mousePos.X >= buttonPos.X and mousePos.X <= buttonPos.X + buttonSize.X and
                                 mousePos.Y >= buttonPos.Y and mousePos.Y <= buttonPos.Y + buttonSize.Y
            
            if not isButtonClick and (mousePos.X < framePos.X or mousePos.X > framePos.X + frameSize.X or
               mousePos.Y < framePos.Y or mousePos.Y > framePos.Y + frameSize.Y) then
                dropdownFrame.Visible = false
            end
        end
    end)
    
    table.insert(self.Connections, closeConnection)
    
    -- –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –∫–Ω–æ–ø–∫–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ü–ö)
    if IS_DESKTOP then
        button.MouseEnter:Connect(function()
            button.BackgroundColor3 = Color3.fromRGB(80, 80, 90)
        end)
        
        button.MouseLeave:Connect(function()
            button.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
        end)
    end
    
    return {
        SetValue = function(value)
            button.Text = value
            if callback then
                pcall(callback, value)
            end
        end,
        GetValue = function() return button.Text end
    }
end

-- –ü–∞–ª–∏—Ç—Ä–∞ —Ü–≤–µ—Ç–æ–≤ (–ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
function ModMenu:ColorPicker(parent, text, defaultColor, callback)
    local pickerContainer = Create("Frame", {
        Parent = parent,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 0, IS_MOBILE and 40 : 30),
        LayoutOrder = #parent:GetChildren()
    })
    
    Create("TextLabel", {
        Parent = pickerContainer,
        Text = text,
        Font = Enum.Font.Gotham,
        TextSize = IS_MOBILE and 14 : 14,
        TextColor3 = Color3.new(1, 1, 1),
        BackgroundTransparency = 1,
        Size = UDim2.new(0.7, 0, 1, 0),
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    local previewButton = Create("TextButton", {
        Parent = pickerContainer,
        Text = "",
        BackgroundColor3 = defaultColor,
        BorderSizePixel = 0,
        Size = UDim2.new(0, IS_MOBILE and 45 : 40, 0, IS_MOBILE and 30 : 25),
        Position = UDim2.new(0.7, 0, 0.5, IS_MOBILE and -15 : -12.5),
        AutoButtonColor = false,
        ZIndex = 10
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(0, 4),
        Parent = previewButton
    })
    
    Create("UIStroke", {
        Parent = previewButton,
        Color = Color3.fromRGB(40, 40, 50),
        Thickness = 2
    })
    
    local pickerFrame = Create("Frame", {
        Parent = self.GUI,  -- –í–∞–∂–Ω–æ: —Ä–æ–¥–∏—Ç–µ–ª—å - GUI, –∞ –Ω–µ container
        BackgroundColor3 = Color3.fromRGB(40, 40, 50),
        BorderSizePixel = 0,
        Size = UDim2.new(0, 170, 0, 110),
        Position = UDim2.new(0, 0, 0, 0),
        Visible = false,
        ZIndex = 10000
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = pickerFrame
    })
    
    Create("UIStroke", {
        Parent = pickerFrame,
        Color = Color3.fromRGB(60, 60, 70),
        Thickness = 2
    })
    
    -- –ü—Ä–æ—Å—Ç–∞—è —Å–µ—Ç–∫–∞ —Ü–≤–µ—Ç–æ–≤
    local colors = {
        Color3.fromRGB(255, 50, 50),   -- –ö—Ä–∞—Å–Ω—ã–π
        Color3.fromRGB(255, 150, 50),  -- –û—Ä–∞–Ω–∂–µ–≤—ã–π
        Color3.fromRGB(255, 255, 50),  -- –ñ–µ–ª—Ç—ã–π
        Color3.fromRGB(50, 255, 50),   -- –ó–µ–ª–µ–Ω—ã–π
        Color3.fromRGB(50, 255, 255),  -- –ì–æ–ª—É–±–æ–π
        Color3.fromRGB(50, 150, 255),  -- –°–∏–Ω–∏–π
        Color3.fromRGB(200, 50, 255),  -- –§–∏–æ–ª–µ—Ç–æ–≤—ã–π
        Color3.fromRGB(255, 50, 200),  -- –†–æ–∑–æ–≤—ã–π
        Color3.fromRGB(255, 255, 255), -- –ë–µ–ª—ã–π
        Color3.fromRGB(200, 200, 200), -- –°–µ—Ä—ã–π
        Color3.new(0.1, 0.1, 0.1),     -- –ß–µ—Ä–Ω—ã–π
        Color3.fromRGB(100, 150, 255)  -- –û—Å–Ω–æ–≤–Ω–æ–π —Å–∏–Ω–∏–π
    }
    
    for i = 1, #colors do
        local colorButton = Create("TextButton", {
            Parent = pickerFrame,
            Text = "",
            BackgroundColor3 = colors[i],
            BorderSizePixel = 0,
            Size = UDim2.new(0, 35, 0, 35),
            Position = UDim2.new(0, ((i-1) % 4) * 40 + 5, 0, math.floor((i-1)/4) * 35 + 5),
            AutoButtonColor = false,
            ZIndex = 10001
        })
        
        Create("UICorner", {
            CornerRadius = UDim.new(0, 4),
            Parent = colorButton
        })
        
        Create("UIStroke", {
            Parent = colorButton,
            Color = Color3.fromRGB(20, 20, 20),
            Thickness = 1
        })
        
        colorButton.MouseButton1Click:Connect(function()
            previewButton.BackgroundColor3 = colors[i]
            if callback then
                local success, err = pcall(callback, colors[i])
                if not success then
                    warn("–û—à–∏–±–∫–∞ –≤ color picker: " .. tostring(err))
                    self:Notify("–û—à–∏–±–∫–∞ –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞", 2)
                end
            end
            pickerFrame.Visible = false
        end)
    end
    
    -- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏
    local function TogglePicker()
        pickerFrame.Visible = not pickerFrame.Visible
        
        if pickerFrame.Visible then
            -- –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º picker —Ä—è–¥–æ–º —Å –∫–Ω–æ–ø–∫–æ–π
            local buttonPos = previewButton.AbsolutePosition
            local buttonSize = previewButton.AbsoluteSize
            
            pickerFrame.Position = UDim2.new(0, buttonPos.X + buttonSize.X + 10, 0, buttonPos.Y)
        end
    end
    
    previewButton.MouseButton1Click:Connect(TogglePicker)
    
    if IS_MOBILE then
        previewButton.TouchTap:Connect(TogglePicker)
    end
    
    -- –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ
    local closeConnection = UserInputService.InputBegan:Connect(function(input)
        if pickerFrame.Visible and (input.UserInputType == Enum.UserInputType.MouseButton1 or 
           input.UserInputType == Enum.UserInputType.Touch) then
            
            local mousePos = input.Position
            local framePos = pickerFrame.AbsolutePosition
            local frameSize = pickerFrame.AbsoluteSize
            
            -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∫–ª–∏–∫–Ω—É–ª–∏ –ª–∏ –Ω–∞ —Å–∞–º—É –∫–Ω–æ–ø–∫—É
            local buttonPos = previewButton.AbsolutePosition
            local buttonSize = previewButton.AbsoluteSize
            
            local isButtonClick = mousePos.X >= buttonPos.X and mousePos.X <= buttonPos.X + buttonSize.X and
                                 mousePos.Y >= buttonPos.Y and mousePos.Y <= buttonPos.Y + buttonSize.Y
            
            if not isButtonClick and (mousePos.X < framePos.X or mousePos.X > framePos.X + frameSize.X or
               mousePos.Y < framePos.Y or mousePos.Y > framePos.Y + frameSize.Y) then
                pickerFrame.Visible = false
            end
        end
    end)
    
    table.insert(self.Connections, closeConnection)
    
    return {
        SetColor = function(color)
            previewButton.BackgroundColor3 = color
            if callback then
                pcall(callback, color)
            end
        end,
        GetColor = function() return previewButton.BackgroundColor3 end
    }
end

-- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã

function ModMenu:MakeDraggable(frame, handle)
    handle = handle or frame
    local dragging = false
    local dragStart, startPos
    
    local function StartDrag(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or 
           input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            
            -- –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏
            if frame:FindFirstChild("UIStroke") then
                SafeTween(frame.UIStroke, {Color = Color3.fromRGB(100, 150, 255)})
            end
        end
    end
    
    local function EndDrag(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or 
           input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
            
            -- –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ü–≤–µ—Ç –æ–±–≤–æ–¥–∫–∏
            if frame:FindFirstChild("UIStroke") then
                SafeTween(frame.UIStroke, {Color = Color3.fromRGB(50, 50, 60)})
            end
        end
    end
    
    handle.InputBegan:Connect(StartDrag)
    UserInputService.InputEnded:Connect(EndDrag)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or 
           input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(
                startPos.X.Scale, startPos.X.Offset + delta.X,
                startPos.Y.Scale, startPos.Y.Offset + delta.Y
            )
        end
    end)
end

-- –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

function ModMenu:ToggleMenu()
    self.MenuOpen = not self.MenuOpen
    self.MenuFrame.Visible = self.MenuOpen
    
    self:UpdateFloatingTexts()
    
    if self.MenuOpen then
        self.MainButton.Text = "‚úï"
        SafeTween(self.MainButton, {BackgroundTransparency = 0.5})
        
        -- –ó–∞–∫—Ä—ã–≤–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç—ã
        if self.SettingsOpen then
            self:ToggleSettings()
        end
    else
        self.MainButton.Text = "‚â°"
        SafeTween(self.MainButton, {BackgroundTransparency = 0})
    end
end

function ModMenu:ToggleSettings()
    self.SettingsOpen = not self.SettingsOpen
    self.SettingsFrame.Visible = self.SettingsOpen
    
    self:UpdateFloatingTexts()
    
    if self.SettingsOpen then
        -- –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ
        if self.MenuOpen then
            self:ToggleMenu()
        end
    end
end

function ModMenu:Notify(text, duration)
    duration = duration or 3
    
    local notification = Create("Frame", {
        Parent = self.GUI,
        BackgroundColor3 = Color3.fromRGB(30, 30, 40),
        BackgroundTransparency = 0.1,
        Size = UDim2.new(0, IS_MOBILE and 280 : 300, 0, IS_MOBILE and 70 : 60),
        Position = UDim2.new(1, IS_MOBILE and 300 : 300, 1, IS_MOBILE and -90 : -80),
        ZIndex = 10000
    })
    
    Create("UICorner", {
        CornerRadius = UDim.new(0, 8),
        Parent = notification
    })
    
    Create("UIStroke", {
        Parent = notification,
        Color = Color3.fromRGB(100, 150, 255),
        Thickness = 1
    })
    
    Create("TextLabel", {
        Parent = notification,
        Text = "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ",
        Font = Enum.Font.GothamBold,
        TextSize = IS_MOBILE and 13 : 14,
        TextColor3 = Color3.fromRGB(100, 150, 255),
        BackgroundTransparency = 1,
        Size = UDim2.new(1, -20, 0, IS_MOBILE and 22 : 20),
        Position = UDim2.new(0, 10, 0, 5),
        TextXAlignment = Enum.TextXAlignment.Left
    })
    
    Create("TextLabel", {
        Parent = notification,
        Text = text,
        Font = Enum.Font.Gotham,
        TextSize = IS_MOBILE and 12 : 12,
        TextColor3 = Color3.new(1, 1, 1),
        BackgroundTransparency = 1,
        Size = UDim2.new(1, -20, 1, IS_MOBILE and -27 : -25),
        Position = UDim2.new(0, 10, 0, IS_MOBILE and 27 : 25),
        TextXAlignment = Enum.TextXAlignment.Left,
        TextWrapped = true
    })
    
    -- –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
    SafeTween(notification, {Position = UDim2.new(1, IS_MOBILE and -300 : -320, 1, IS_MOBILE and -90 : -80)})
    
    -- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
    task.spawn(function()
        task.wait(duration)
        if notification and notification.Parent then
            SafeTween(notification, {Position = UDim2.new(1, IS_MOBILE and 300 : 300, 1, IS_MOBILE and -90 : -80)})
            task.wait(0.3)
            if notification and notification.Parent then
                notification:Destroy()
            end
        end
    end)
end

-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–µ–º–æ-–∫–æ–Ω—Ç–µ–Ω—Ç–∞
function ModMenu:AddDemoContent()
    local homeTab = nil
    for _, child in ipairs(self.RightPanel:GetChildren()) do
        if child.Name == "–ì–ª–∞–≤–Ω–∞—èContent" then
            homeTab = child
            break
        end
    end
    
    if homeTab then
        self:Btn(homeTab, "üëã –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ", function()
            self:Notify("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ " .. self.MenuName .. "!", 3)
        end)
        
        self:Btn(homeTab, "üì± –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è", function()
            self:Notify("–í–µ—Ä—Å–∏—è: " .. self.Version .. "\n–ê–≤—Ç–æ—Ä: –§–∞—Ç–∏–º–∞ ‚ô•Ô∏è", 4)
        end)
        
        self:Toggle(homeTab, "–î–µ–º–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å", false, function(state)
            self:Notify("–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å: " .. (state and "–í–ö–õ" or "–í–´–ö–õ"), 2)
        end)
        
        self:Slider(homeTab, "–î–µ–º–æ —Å–ª–∞–π–¥–µ—Ä", 0, 100, 50, 1, function(value)
            self:Notify("–ó–Ω–∞—á–µ–Ω–∏–µ: " .. value, 1)
        end)
        
        self:Dropdown(homeTab, "–î–µ–º–æ –≤—ã–±–æ—Ä", {"–í–∞—Ä–∏–∞–Ω—Ç 1", "–í–∞—Ä–∏–∞–Ω—Ç 2", "–í–∞—Ä–∏–∞–Ω—Ç 3"}, "–í–∞—Ä–∏–∞–Ω—Ç 1", function(value)
            self:Notify("–í—ã–±—Ä–∞–Ω–æ: " .. value, 2)
        end)
        
        self:ColorPicker(homeTab, "–î–µ–º–æ —Ü–≤–µ—Ç", Color3.fromRGB(255, 100, 100), function(color)
            self:Notify("–¶–≤–µ—Ç –∏–∑–º–µ–Ω–µ–Ω", 2)
        end)
    end
end

-- API –º–µ—Ç–æ–¥—ã
function ModMenu:Destroy()
    if not self.Active then return end
    
    -- –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    for _, connection in ipairs(self.Connections) do
        if type(connection) == "userdata" and connection.Disconnect then
            pcall(function() connection:Disconnect() end)
        end
    end
    
    self.Connections = {}
    
    -- –£–Ω–∏—á—Ç–æ–∂–∞–µ–º GUI
    if self.GUI and self.GUI.Parent then
        self.GUI:Destroy()
    end
    
    self.Active = false
end

function ModMenu:IsActive()
    return self.Active == true
end

-- –≠–∫—Å–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
local Library = {}

function Library.new(menuName)
    local menu = ModMenu.new(menuName)
    
    task.spawn(function()
        task.wait(1)
        menu:AddDemoContent()
    end)
    
    return menu
end

-- –£—Ç–∏–ª–∏—Ç—ã
Library.Create = Create
Library.Tween = SafeTween
Library.Round = Round
Library.DeepClone = DeepClone

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
task.spawn(function()
    task.wait(1)
    print("‚úÖ Mod Menu Library v3.2 –∑–∞–≥—Ä—É–∂–µ–Ω–∞!")
    print("üì± –ü–æ–¥–¥–µ—Ä–∂–∫–∞: –ü–ö –∏ –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞")
    print("üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã: Slider, Dropdown, ColorPicker, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫")
end)

return Library
