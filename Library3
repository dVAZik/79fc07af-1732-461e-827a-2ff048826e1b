-- Fatima Mod Menu v5.1 - Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½Ð°Ñ Ð¸ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð½Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ
local ElegantModMenu = {}
ElegantModMenu.__index = ElegantModMenu

-- ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ
local CONFIG = {
    WINDOW_WIDTH = 750,
    WINDOW_HEIGHT = 550,
    SIDEBAR_WIDTH = 200,
    ELEMENT_HEIGHT = 40,
    PADDING = 10,
    CORNER_RADIUS = 8,
    ANIMATION_DURATION = 0.15,
    FAB_SIZE = 56
}

-- Ð¦Ð²ÐµÑ‚Ð¾Ð²Ð°Ñ ÑÑ…ÐµÐ¼Ð° (Ñ‚ÐµÐ¼Ð½Ð°Ñ Ñ Ð°ÐºÑ†ÐµÐ½Ñ‚Ð°Ð¼Ð¸)
local COLORS = {
    THEME = {
        PRIMARY = Color3.fromRGB(180, 70, 160),
        SECONDARY = Color3.fromRGB(200, 90, 180),
        TERTIARY = Color3.fromRGB(160, 60, 140)
    },
    BACKGROUND = {
        PRIMARY = Color3.fromRGB(18, 18, 24),
        SECONDARY = Color3.fromRGB(28, 28, 34),
        TERTIARY = Color3.fromRGB(38, 38, 44),
        MODAL = Color3.fromRGB(0, 0, 0, 0.85),
        SIDEBAR = Color3.fromRGB(22, 22, 28),
        SETTINGS = Color3.fromRGB(25, 25, 32)
    },
    TEXT = {
        PRIMARY = Color3.fromRGB(240, 240, 245),
        SECONDARY = Color3.fromRGB(180, 180, 190),
        DISABLED = Color3.fromRGB(100, 100, 110)
    },
    STATES = {
        HOVER = Color3.fromRGB(255, 255, 255, 0.08),
        SELECTED = Color3.fromRGB(180, 70, 160, 0.15)
    }
}

-- Ð’ÑÐ¿Ð¾Ð¼Ð¾Ð³Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸
local function tween(object, properties, duration)
    local tweenService = game:GetService("TweenService")
    local tweenInfo = TweenInfo.new(duration or CONFIG.ANIMATION_DURATION, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tweenObj = tweenService:Create(object, tweenInfo, properties)
    tweenObj:Play()
    return tweenObj
end

local function createRoundedFrame()
    local frame = Instance.new("Frame")
    frame.BackgroundTransparency = 1
    frame.BorderSizePixel = 0
    frame.ClipsDescendants = true
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, CONFIG.CORNER_RADIUS)
    corner.Parent = frame
    
    return frame
end

local function createTextLabel(text, size, parent)
    local label = Instance.new("TextLabel")
    label.Text = text
    label.TextColor3 = COLORS.TEXT.PRIMARY
    label.BackgroundTransparency = 1
    label.Font = Enum.Font.GothamMedium
    label.TextSize = size
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.ClipsDescendants = true
    
    if parent then
        label.Parent = parent
    end
    
    return label
end

-- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ‚Ð¾Ñ€
function ElegantModMenu.new(options)
    local self = setmetatable({}, ElegantModMenu)
    
    options = options or {}
    self.name = options.Name or "Fatima Menu"
    self.icon = options.Icon or "â™¥ï¸"
    self.accentColor = options.AccentColor or COLORS.THEME.PRIMARY
    
    self.sections = {}
    self.elements = {}
    self.activeSection = "HOME"
    self.watermarkInstances = {}
    self.watermarkTweens = {}
    
    -- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¼ÐµÐ½ÑŽ
    self.settings = {
        menuOpacity = 0.98,
        showWatermark = true,
        watermarkSpeed = 1.5,
        watermarkCount = 8,
        watermarkText = "Ð¤Ð°Ñ‚Ð¸Ð¼Ð°â™¥ï¸"
    }
    
    self:cleanupOldMenus()
    self:createMainWindow()
    self:createWatermarks()
    self:setupDefaultSections()
    
    return self
end

function ElegantModMenu:cleanupOldMenus()
    local coreGui = game:GetService("CoreGui")
    
    for _, child in pairs(coreGui:GetChildren()) do
        if child.Name == "ElegantModMenu" then
            child:Destroy()
        end
    end
end

-- Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¿Ð»Ð°Ð²Ð°ÑŽÑ‰Ð¸Ñ… Ð²Ð¾Ð´ÑÐ½Ñ‹Ñ… Ð·Ð½Ð°ÐºÐ¾Ð² Ñ Ñ€Ð°Ð·Ð½Ñ‹Ð¼Ð¸ Ð³Ñ€Ð°Ð½Ð¸Ñ†Ð°Ð¼Ð¸
function ElegantModMenu:createWatermarks()
    if not self.settings.showWatermark then return end
    
    local borderStyles = {
        {Thickness = 1, Transparency = 0.7},
        {Thickness = 2, Transparency = 0.5},
        {Thickness = 1.5, Transparency = 0.6},
        {Thickness = 3, Transparency = 0.4},
        {Thickness = 0.5, Transparency = 0.8}
    }
    
    for i = 1, self.settings.watermarkCount do
        local watermark = Instance.new("TextLabel")
        watermark.Name = "Watermark_" .. i
        watermark.Text = self.settings.watermarkText
        watermark.TextColor3 = self.accentColor
        watermark.TextTransparency = 0.7
        watermark.BackgroundTransparency = 1
        watermark.Font = Enum.Font.GothamBold
        watermark.TextSize = math.random(28, 36)
        watermark.TextXAlignment = Enum.TextXAlignment.Center
        watermark.TextYAlignment = Enum.TextYAlignment.Center
        watermark.ZIndex = 0
        watermark.Visible = true
        watermark.Parent = self.contentArea
        
        -- ÐÐ°Ñ‡Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ Ð¸ Ñ€Ð°Ð·Ð¼ÐµÑ€
        local size = math.random(80, 120)
        watermark.Size = UDim2.new(0, size * 3, 0, size)
        watermark.Position = UDim2.new(
            math.random() * 0.8,
            math.random(-100, 100),
            math.random() * 0.8,
            math.random(-100, 100)
        )
        watermark.Rotation = math.random(-20, 20)
        
        -- Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ñ€Ð°Ð·Ð½Ñ‹Ðµ Ð³Ñ€Ð°Ð½Ð¸Ñ†Ñ‹
        local borderStyle = borderStyles[math.random(#borderStyles)]
        local stroke = Instance.new("UIStroke")
        stroke.Color = self.accentColor
        stroke.Thickness = borderStyle.Thickness
        stroke.Transparency = borderStyle.Transparency
        stroke.LineJoinMode = Enum.LineJoinMode.Round
        stroke.Parent = watermark
        
        table.insert(self.watermarkInstances, watermark)
    end
    
    -- Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸ÑŽ
    self:animateWatermarks()
end

function ElegantModMenu:animateWatermarks()
    task.spawn(function()
        while self.screenGui and self.screenGui.Parent do
            for _, watermark in ipairs(self.watermarkInstances) do
                if watermark and watermark.Parent then
                    -- ÐžÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ðµ Ñ‚Ð²Ð¸Ð½Ñ‹
                    if self.watermarkTweens[watermark] then
                        for _, tweenObj in ipairs(self.watermarkTweens[watermark]) do
                            pcall(function() tweenObj:Cancel() end)
                        end
                    end
                    
                    self.watermarkTweens[watermark] = {}
                    
                    -- ÐÐ¾Ð²Ð°Ñ Ñ†ÐµÐ»ÑŒ
                    local targetPosition = UDim2.new(
                        math.random() * 0.8,
                        math.random(-100, 100),
                        math.random() * 0.8,
                        math.random(-100, 100)
                    )
                    
                    local targetRotation = math.random(-20, 20)
                    local targetTransparency = math.random(60, 85) / 100
                    local targetSize = UDim2.new(0, math.random(70, 130) * 3, 0, math.random(70, 130))
                    
                    -- ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ
                    local moveTween = tween(watermark, {
                        Position = targetPosition
                    }, 25 / self.settings.watermarkSpeed)
                    
                    -- ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ
                    local rotateTween = tween(watermark, {
                        Rotation = targetRotation
                    }, 20 / self.settings.watermarkSpeed)
                    
                    -- ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ð¾ÑÑ‚Ð¸
                    local transparencyTween = tween(watermark, {
                        TextTransparency = targetTransparency
                    }, 15 / self.settings.watermarkSpeed)
                    
                    -- ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð°
                    local sizeTween = tween(watermark, {
                        Size = targetSize
                    }, 18 / self.settings.watermarkSpeed)
                    
                    table.insert(self.watermarkTweens[watermark], moveTween)
                    table.insert(self.watermarkTweens[watermark], rotateTween)
                    table.insert(self.watermarkTweens[watermark], transparencyTween)
                    table.insert(self.watermarkTweens[watermark], sizeTween)
                end
            end
            task.wait(12) -- ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸ÑŽ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 12 ÑÐµÐºÑƒÐ½Ð´
        end
    end)
end

function ElegantModMenu:createMainWindow()
    -- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ GUI
    self.screenGui = Instance.new("ScreenGui")
    self.screenGui.Name = "ElegantModMenu"
    self.screenGui.ResetOnSpawn = false
    self.screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    self.screenGui.Parent = game:GetService("CoreGui")
    
    -- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ðµ Ð¾ÐºÐ½Ð¾
    self.window = Instance.new("Frame")
    self.window.Name = "Window"
    self.window.Size = UDim2.new(0, CONFIG.WINDOW_WIDTH, 0, CONFIG.WINDOW_HEIGHT)
    self.window.Position = UDim2.new(0.5, -CONFIG.WINDOW_WIDTH/2, 0.5, -CONFIG.WINDOW_HEIGHT/2)
    self.window.BackgroundColor3 = COLORS.BACKGROUND.PRIMARY
    self.window.BackgroundTransparency = 1 - self.settings.menuOpacity
    self.window.ClipsDescendants = true
    self.window.Visible = false
    self.window.ZIndex = 100
    self.window.Parent = self.screenGui
    
    local windowCorner = Instance.new("UICorner")
    windowCorner.CornerRadius = UDim.new(0, 12)
    windowCorner.Parent = self.window
    
    local windowStroke = Instance.new("UIStroke")
    windowStroke.Color = self.accentColor
    windowStroke.Thickness = 2
    windowStroke.Transparency = 0.15
    windowStroke.Parent = self.window
    
    -- Ð‘Ð¾ÐºÐ¾Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ
    self.sidebar = Instance.new("Frame")
    self.sidebar.Name = "Sidebar"
    self.sidebar.Size = UDim2.new(0, CONFIG.SIDEBAR_WIDTH, 1, 0)
    self.sidebar.BackgroundColor3 = COLORS.BACKGROUND.SIDEBAR
    self.sidebar.BackgroundTransparency = 0.05
    self.sidebar.ZIndex = 101
    self.sidebar.Parent = self.window
    
    local sidebarCorner = Instance.new("UICorner")
    sidebarCorner.CornerRadius = UDim.new(0, 12, 0, 0)
    sidebarCorner.Parent = self.sidebar
    
    -- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð±Ð¾ÐºÐ¾Ð²Ð¾Ð¹ Ð¿Ð°Ð½ÐµÐ»Ð¸
    local sidebarHeader = Instance.new("Frame")
    sidebarHeader.Name = "SidebarHeader"
    sidebarHeader.Size = UDim2.new(1, 0, 0, 80)
    sidebarHeader.BackgroundColor3 = self.accentColor
    sidebarHeader.BackgroundTransparency = 0.85
    sidebarHeader.ZIndex = 102
    sidebarHeader.Parent = self.sidebar
    
    local titleContainer = Instance.new("Frame")
    titleContainer.Name = "TitleContainer"
    titleContainer.Size = UDim2.new(1, -20, 1, -20)
    titleContainer.Position = UDim2.new(0, 10, 0, 10)
    titleContainer.BackgroundTransparency = 1
    titleContainer.Parent = sidebarHeader
    
    self.titleLabel = createTextLabel(self.name, 22, titleContainer)
    self.titleLabel.Size = UDim2.new(1, 0, 0, 35)
    self.titleLabel.TextXAlignment = Enum.TextXAlignment.Center
    self.titleLabel.Font = Enum.Font.GothamBold
    self.titleLabel.TextColor3 = self.accentColor
    
    local subtitleLabel = createTextLabel(self.icon, 16, titleContainer)
    subtitleLabel.Size = UDim2.new(1, 0, 0, 25)
    subtitleLabel.Position = UDim2.new(0, 0, 0, 35)
    subtitleLabel.TextXAlignment = Enum.TextXAlignment.Center
    subtitleLabel.TextColor3 = COLORS.TEXT.SECONDARY
    
    -- ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð´Ð»Ñ ÐºÐ½Ð¾Ð¿Ð¾Ðº ÑÐµÐºÑ†Ð¸Ð¹
    self.sectionsContainer = Instance.new("Frame")
    self.sectionsContainer.Name = "SectionsContainer"
    self.sectionsContainer.Size = UDim2.new(1, 0, 1, -90)
    self.sectionsContainer.Position = UDim2.new(0, 0, 0, 80)
    self.sectionsContainer.BackgroundTransparency = 1
    self.sectionsContainer.ZIndex = 102
    self.sectionsContainer.Parent = self.sidebar
    
    local sectionsLayout = Instance.new("UIListLayout")
    sectionsLayout.Padding = UDim.new(0, 6)
    sectionsLayout.SortOrder = Enum.SortOrder.LayoutOrder
    sectionsLayout.Parent = self.sectionsContainer
    
    -- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚
    self.contentArea = Instance.new("Frame")
    self.contentArea.Name = "ContentArea"
    self.contentArea.Size = UDim2.new(1, -CONFIG.SIDEBAR_WIDTH, 1, 0)
    self.contentArea.Position = UDim2.new(0, CONFIG.SIDEBAR_WIDTH, 0, 0)
    self.contentArea.BackgroundTransparency = 1
    self.contentArea.ClipsDescendants = true
    self.contentArea.ZIndex = 101
    self.contentArea.Parent = self.window
    
    -- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð°
    self.contentHeader = Instance.new("Frame")
    self.contentHeader.Name = "ContentHeader"
    self.contentHeader.Size = UDim2.new(1, -20, 0, 60)
    self.contentHeader.Position = UDim2.new(0, 10, 0, 10)
    self.contentHeader.BackgroundTransparency = 1
    self.contentHeader.ZIndex = 102
    self.contentHeader.Parent = self.contentArea
    
    self.sectionTitle = createTextLabel("HOME", 20, self.contentHeader)
    self.sectionTitle.Size = UDim2.new(0.7, 0, 1, 0)
    self.sectionTitle.Font = Enum.Font.GothamBold
    self.sectionTitle.TextColor3 = self.accentColor
    
    -- ÐšÐ½Ð¾Ð¿ÐºÐ¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ
    local controlButtons = Instance.new("Frame")
    controlButtons.Name = "ControlButtons"
    controlButtons.Size = UDim2.new(0.3, 0, 1, 0)
    controlButtons.Position = UDim2.new(0.7, 0, 0, 0)
    controlButtons.BackgroundTransparency = 1
    controlButtons.Parent = self.contentHeader
    
    -- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº
    self.settingsButton = Instance.new("TextButton")
    self.settingsButton.Name = "SettingsButton"
    self.settingsButton.Size = UDim2.new(0, 36, 0, 36)
    self.settingsButton.Position = UDim2.new(0, 0, 0.5, -18)
    self.settingsButton.BackgroundColor3 = COLORS.BACKGROUND.TERTIARY
    self.settingsButton.BackgroundTransparency = 0.8
    self.settingsButton.Text = "âš™ï¸"
    self.settingsButton.TextColor3 = COLORS.TEXT.PRIMARY
    self.settingsButton.TextSize = 18
    self.settingsButton.Font = Enum.Font.GothamMedium
    self.settingsButton.AutoButtonColor = false
    self.settingsButton.ZIndex = 103
    self.settingsButton.Parent = controlButtons
    
    local settingsCorner = Instance.new("UICorner")
    settingsCorner.CornerRadius = UDim.new(0, 8)
    settingsCorner.Parent = self.settingsButton
    
    self.settingsButton.MouseEnter:Connect(function()
        tween(self.settingsButton, {BackgroundTransparency = 0.7})
    end)
    
    self.settingsButton.MouseLeave:Connect(function()
        tween(self.settingsButton, {BackgroundTransparency = 0.8})
    end)
    
    self.settingsButton.MouseButton1Click:Connect(function()
        self:openSettingsMenu()
    end)
    
    -- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ñ
    self.closeButton = Instance.new("TextButton")
    self.closeButton.Name = "CloseButton"
    self.closeButton.Size = UDim2.new(0, 36, 0, 36)
    self.closeButton.Position = UDim2.new(1, -36, 0.5, -18)
    self.closeButton.BackgroundColor3 = Color3.fromRGB(220, 80, 80)
    self.closeButton.BackgroundTransparency = 0.8
    self.closeButton.Text = "âœ•"
    self.closeButton.TextColor3 = COLORS.TEXT.PRIMARY
    self.closeButton.TextSize = 18
    self.closeButton.Font = Enum.Font.GothamMedium
    self.closeButton.AutoButtonColor = false
    self.closeButton.ZIndex = 103
    self.closeButton.Parent = controlButtons
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 8)
    closeCorner.Parent = self.closeButton
    
    self.closeButton.MouseEnter:Connect(function()
        tween(self.closeButton, {BackgroundTransparency = 0.7})
    end)
    
    self.closeButton.MouseLeave:Connect(function()
        tween(self.closeButton, {BackgroundTransparency = 0.8})
    end)
    
    self.closeButton.MouseButton1Click:Connect(function()
        self:toggle()
    end)
    
    -- ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð´Ð»Ñ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð°
    self.contentContainer = Instance.new("ScrollingFrame")
    self.contentContainer.Name = "ContentContainer"
    self.contentContainer.Size = UDim2.new(1, -20, 1, -90)
    self.contentContainer.Position = UDim2.new(0, 10, 0, 70)
    self.contentContainer.BackgroundTransparency = 1
    self.contentContainer.ScrollBarThickness = 4
    self.contentContainer.ScrollBarImageColor3 = self.accentColor
    self.contentContainer.ScrollBarImageTransparency = 0.8
    self.contentContainer.ZIndex = 103
    self.contentContainer.Parent = self.contentArea
    
    local contentLayout = Instance.new("UIListLayout")
    contentLayout.Padding = UDim.new(0, CONFIG.PADDING)
    contentLayout.SortOrder = Enum.SortOrder.LayoutOrder
    contentLayout.Parent = self.contentContainer
    
    -- Ð¤Ð°Ð±Ñ€Ð¸Ñ‡Ð½Ð°Ñ ÐºÐ½Ð¾Ð¿ÐºÐ°
    self:createFabButton()
end

function ElegantModMenu:setupDefaultSections()
    -- Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð´Ð¾Ð¼Ð°ÑˆÐ½ÑŽÑŽ ÑÐµÐºÑ†Ð¸ÑŽ
    self:addSection("HOME", "ðŸ ")
    self:addSection("LOCAL", "ðŸš€")
    self:addSection("ESP", "ðŸŽ¯")
    self:addSection("AIM", "ðŸŽ®")
    self:addSection("VISUAL", "ðŸ‘ï¸")
    self:addSection("MISC", "ðŸ”§")
    
    -- Ð’Ñ‹Ð±Ð¸Ñ€Ð°ÐµÐ¼ Ð´Ð¾Ð¼Ð°ÑˆÐ½ÑŽÑŽ ÑÐµÐºÑ†Ð¸ÑŽ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ
    self:selectSection("HOME")
end

function ElegantModMenu:addSection(name, icon)
    local section = {
        name = name,
        icon = icon or "ðŸ“",
        elements = {}
    }
    
    table.insert(self.sections, section)
    
    -- Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð² Ð±Ð¾ÐºÐ¾Ð²Ð¾Ð¹ Ð¿Ð°Ð½ÐµÐ»Ð¸
    local sectionButton = Instance.new("TextButton")
    sectionButton.Name = "Section_" .. name
    sectionButton.Size = UDim2.new(1, -12, 0, 38)
    sectionButton.Position = UDim2.new(0, 6, 0, (#self.sections - 1) * 44)
    sectionButton.BackgroundColor3 = self.activeSection == name and self.accentColor or COLORS.BACKGROUND.TERTIARY
    sectionButton.BackgroundTransparency = self.activeSection == name and 0.8 or 0.9
    sectionButton.Text = ""
    sectionButton.AutoButtonColor = false
    sectionButton.LayoutOrder = #self.sections
    sectionButton.ZIndex = 103
    sectionButton.Parent = self.sectionsContainer
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = sectionButton
    
    local buttonContent = Instance.new("Frame")
    buttonContent.Name = "Content"
    buttonContent.Size = UDim2.new(1, -12, 1, -12)
    buttonContent.Position = UDim2.new(0, 6, 0, 6)
    buttonContent.BackgroundTransparency = 1
    buttonContent.Parent = sectionButton
    
    local iconLabel = createTextLabel(icon or "ðŸ“", 16, buttonContent)
    iconLabel.Size = UDim2.new(0, 28, 1, 0)
    iconLabel.TextXAlignment = Enum.TextXAlignment.Center
    
    local nameLabel = createTextLabel(name, 14, buttonContent)
    nameLabel.Size = UDim2.new(1, -34, 1, 0)
    nameLabel.Position = UDim2.new(0, 32, 0, 0)
    nameLabel.Font = Enum.Font.GothamMedium
    
    -- ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÐºÐ»Ð¸ÐºÐ°
    sectionButton.MouseButton1Click:Connect(function()
        self:selectSection(name)
    end)
    
    -- Ð­Ñ„Ñ„ÐµÐºÑ‚Ñ‹ Ð½Ð°Ð²ÐµÐ´ÐµÐ½Ð¸Ñ
    sectionButton.MouseEnter:Connect(function()
        if self.activeSection ~= name then
            tween(sectionButton, {BackgroundTransparency = 0.85})
        end
    end)
    
    sectionButton.MouseLeave:Connect(function()
        if self.activeSection ~= name then
            tween(sectionButton, {BackgroundTransparency = 0.9})
        end
    end)
    
    return section
end

function ElegantModMenu:selectSection(sectionName)
    self.activeSection = sectionName
    self.sectionTitle.Text = sectionName
    
    -- ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
    for _, child in ipairs(self.contentContainer:GetChildren()) do
        if child:IsA("Frame") or child:IsA("TextButton") then
            child:Destroy()
        end
    end
    
    -- ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÐºÐ½Ð¾Ð¿ÐºÐ¸ ÑÐµÐºÑ†Ð¸Ð¹
    for _, child in ipairs(self.sectionsContainer:GetChildren()) do
        if child:IsA("TextButton") then
            local isActive = child.Name == "Section_" .. sectionName
            tween(child, {
                BackgroundColor3 = isActive and self.accentColor or COLORS.BACKGROUND.TERTIARY,
                BackgroundTransparency = isActive and 0.8 or 0.9
            })
        end
    end
    
    -- ÐÐ°Ñ…Ð¾Ð´Ð¸Ð¼ ÑÐµÐºÑ†Ð¸ÑŽ Ð¸ Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ ÐµÑ‘ Ð½Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ
    for _, section in ipairs(self.sections) do
        if section.name == sectionName then
            if section.name == "HOME" then
                self:setupHomeSection()
            elseif section.name == "LOCAL" then
                self:setupLocalSection()
            elseif section.name == "ESP" then
                self:setupESPSection()
            elseif section.name == "AIM" then
                self:setupAimSection()
            elseif section.name == "VISUAL" then
                self:setupVisualSection()
            elseif section.name == "MISC" then
                self:setupMiscSection()
            end
            break
        end
    end
end

-- ÐœÐµÑ‚Ð¾Ð´Ñ‹ Ð´Ð»Ñ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð² UI (Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ«)
function ElegantModMenu:button(name, callback, icon)
    local buttonContainer = createRoundedFrame()
    buttonContainer.Name = "Button_" .. name
    buttonContainer.Size = UDim2.new(1, 0, 0, CONFIG.ELEMENT_HEIGHT)
    buttonContainer.BackgroundColor3 = COLORS.BACKGROUND.SECONDARY
    buttonContainer.BackgroundTransparency = 0.9
    buttonContainer.LayoutOrder = #self.elements + 1
    buttonContainer.ZIndex = 104
    buttonContainer.Parent = self.contentContainer
    
    local button = Instance.new("TextButton")
    button.Name = "Button"
    button.Size = UDim2.new(1, 0, 1, 0)
    button.BackgroundTransparency = 1
    button.Text = ""
    button.AutoButtonColor = false
    button.ZIndex = 105
    button.Parent = buttonContainer
    
    local content = Instance.new("Frame")
    content.Name = "Content"
    content.Size = UDim2.new(1, -16, 1, 0)
    content.Position = UDim2.new(0, 8, 0, 0)
    content.BackgroundTransparency = 1
    content.Parent = buttonContainer
    
    if icon then
        local iconLabel = Instance.new("TextLabel")
        iconLabel.Text = icon
        iconLabel.TextColor3 = COLORS.TEXT.PRIMARY
        iconLabel.BackgroundTransparency = 1
        iconLabel.Font = Enum.Font.GothamMedium
        iconLabel.TextSize = 18
        iconLabel.TextXAlignment = Enum.TextXAlignment.Center
        iconLabel.Size = UDim2.new(0, 28, 1, 0)
        iconLabel.Parent = content
    end
    
    local textLabel = createTextLabel(name, 15, content)
    textLabel.Size = UDim2.new(1, icon and -32 or -8, 1, 0)
    textLabel.Position = icon and UDim2.new(0, 32, 0, 0) or UDim2.new(0, 0, 0, 0)
    
    -- Ð­Ñ„Ñ„ÐµÐºÑ‚Ñ‹
    button.MouseEnter:Connect(function()
        tween(buttonContainer, {BackgroundTransparency = 0.85})
    end)
    
    button.MouseLeave:Connect(function()
        tween(buttonContainer, {BackgroundTransparency = 0.9})
    end)
    
    button.MouseButton1Click:Connect(function()
        if callback then
            pcall(callback)
        end
    end)
    
    table.insert(self.elements, buttonContainer)
    
    return buttonContainer
end

function ElegantModMenu:toggle(name, defaultState, callback, icon)
    local state = defaultState or false
    
    local toggleContainer = createRoundedFrame()
    toggleContainer.Name = "Toggle_" .. name
    toggleContainer.Size = UDim2.new(1, 0, 0, CONFIG.ELEMENT_HEIGHT)
    toggleContainer.BackgroundColor3 = COLORS.BACKGROUND.SECONDARY
    toggleContainer.BackgroundTransparency = 0.9
    toggleContainer.LayoutOrder = #self.elements + 1
    toggleContainer.ZIndex = 104
    toggleContainer.Parent = self.contentContainer
    
    local button = Instance.new("TextButton")
    button.Name = "Button"
    button.Size = UDim2.new(1, 0, 1, 0)
    button.BackgroundTransparency = 1
    button.Text = ""
    button.AutoButtonColor = false
    button.ZIndex = 105
    button.Parent = toggleContainer
    
    local content = Instance.new("Frame")
    content.Name = "Content"
    content.Size = UDim2.new(1, -16, 1, 0)
    content.Position = UDim2.new(0, 8, 0, 0)
    content.BackgroundTransparency = 1
    content.Parent = toggleContainer
    
    if icon then
        local iconLabel = Instance.new("TextLabel")
        iconLabel.Text = icon
        iconLabel.TextColor3 = COLORS.TEXT.PRIMARY
        iconLabel.BackgroundTransparency = 1
        iconLabel.Font = Enum.Font.GothamMedium
        iconLabel.TextSize = 18
        iconLabel.TextXAlignment = Enum.TextXAlignment.Center
        iconLabel.Size = UDim2.new(0, 28, 1, 0)
        iconLabel.Parent = content
    end
    
    local textLabel = createTextLabel(name, 15, content)
    textLabel.Size = UDim2.new(0.7, icon and -32 or -8, 1, 0)
    textLabel.Position = icon and UDim2.new(0, 32, 0, 0) or UDim2.new(0, 0, 0, 0)
    
    local toggleFrame = Instance.new("Frame")
    toggleFrame.Name = "ToggleFrame"
    toggleFrame.Size = UDim2.new(0, 48, 0, 26)
    toggleFrame.Position = UDim2.new(1, -56, 0.5, -13)
    toggleFrame.BackgroundColor3 = state and self.accentColor or COLORS.BACKGROUND.TERTIARY
    toggleFrame.BackgroundTransparency = 0.8
    toggleFrame.BorderSizePixel = 0
    toggleFrame.ZIndex = 106
    toggleFrame.Parent = content
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 13)
    toggleCorner.Parent = toggleFrame
    
    local toggleCircle = Instance.new("Frame")
    toggleCircle.Name = "ToggleCircle"
    toggleCircle.Size = UDim2.new(0, 20, 0, 20)
    toggleCircle.Position = state and UDim2.new(1, -22, 0.5, -10) or UDim2.new(0, 3, 0.5, -10)
    toggleCircle.BackgroundColor3 = COLORS.TEXT.PRIMARY
    toggleCircle.BorderSizePixel = 0
    toggleCircle.ZIndex = 107
    toggleCircle.Parent = toggleFrame
    
    local circleCorner = Instance.new("UICorner")
    circleCorner.CornerRadius = UDim.new(0.5, 0)
    circleCorner.Parent = toggleCircle
    
    local function setState(newState)
        state = newState
        
        tween(toggleFrame, {
            BackgroundColor3 = state and self.accentColor or COLORS.BACKGROUND.TERTIARY
        })
        
        tween(toggleCircle, {
            Position = state and UDim2.new(1, -22, 0.5, -10) or UDim2.new(0, 3, 0.5, -10)
        })
        
        if callback then
            pcall(callback, state)
        end
    end
    
    button.MouseButton1Click:Connect(function()
        setState(not state)
    end)
    
    table.insert(self.elements, toggleContainer)
    
    return {
        setState = function(newState)
            setState(newState)
        end,
        getState = function()
            return state
        end
    }
end

function ElegantModMenu:slider(name, min, max, defaultValue, callback, icon)
    local value = defaultValue or min
    
    local sliderContainer = createRoundedFrame()
    sliderContainer.Name = "Slider_" .. name
    sliderContainer.Size = UDim2.new(1, 0, 0, 65)
    sliderContainer.BackgroundColor3 = COLORS.BACKGROUND.SECONDARY
    sliderContainer.BackgroundTransparency = 0.9
    sliderContainer.LayoutOrder = #self.elements + 1
    sliderContainer.ZIndex = 104
    sliderContainer.Parent = self.contentContainer
    
    local header = Instance.new("Frame")
    header.Name = "Header"
    header.Size = UDim2.new(1, -16, 0, 24)
    header.Position = UDim2.new(0, 8, 0, 5)
    header.BackgroundTransparency = 1
    header.Parent = sliderContainer
    
    if icon then
        local iconLabel = Instance.new("TextLabel")
        iconLabel.Text = icon
        iconLabel.TextColor3 = COLORS.TEXT.PRIMARY
        iconLabel.BackgroundTransparency = 1
        iconLabel.Font = Enum.Font.GothamMedium
        iconLabel.TextSize = 16
        iconLabel.TextXAlignment = Enum.TextXAlignment.Center
        iconLabel.Size = UDim2.new(0, 24, 1, 0)
        iconLabel.Parent = header
    end
    
    local nameLabel = createTextLabel(name, 14, header)
    nameLabel.Size = UDim2.new(0.6, icon and -28 or -5, 1, 0)
    nameLabel.Position = icon and UDim2.new(0, 28, 0, 0) or UDim2.new(0, 0, 0, 0)
    
    local valueLabel = createTextLabel(tostring(value), 14, header)
    valueLabel.Size = UDim2.new(0.4, -5, 1, 0)
    valueLabel.Position = UDim2.new(0.6, 5, 0, 0)
    valueLabel.TextXAlignment = Enum.TextXAlignment.Right
    valueLabel.TextColor3 = self.accentColor
    
    local track = Instance.new("Frame")
    track.Name = "Track"
    track.Size = UDim2.new(1, -16, 0, 8)
    track.Position = UDim2.new(0, 8, 0, 40)
    track.BackgroundColor3 = COLORS.BACKGROUND.TERTIARY
    track.BorderSizePixel = 0
    track.ZIndex = 105
    track.Parent = sliderContainer
    
    local trackCorner = Instance.new("UICorner")
    trackCorner.CornerRadius = UDim.new(0, 4)
    trackCorner.Parent = track
    
    local fill = Instance.new("Frame")
    fill.Name = "Fill"
    fill.Size = UDim2.new(0, 0, 1, 0)
    fill.BackgroundColor3 = self.accentColor
    fill.BorderSizePixel = 0
    fill.ZIndex = 106
    fill.Parent = track
    
    local fillCorner = Instance.new("UICorner")
    fillCorner.CornerRadius = UDim.new(0, 4)
    fillCorner.Parent = fill
    
    local thumb = Instance.new("TextButton")
    thumb.Name = "Thumb"
    thumb.Size = UDim2.new(0, 18, 0, 18)
    thumb.Position = UDim2.new(0, -9, 0.5, -9)
    thumb.BackgroundColor3 = COLORS.TEXT.PRIMARY
    thumb.BorderSizePixel = 0
    thumb.Text = ""
    thumb.AutoButtonColor = false
    thumb.ZIndex = 107
    thumb.Parent = track
    
    local thumbCorner = Instance.new("UICorner")
    thumbCorner.CornerRadius = UDim.new(0.5, 0)
    thumbCorner.Parent = thumb
    
    local function updateValue(newValue)
        value = math.clamp(newValue, min, max)
        value = math.floor(value * 10) / 10 -- ÐžÐ´Ð¸Ð½ Ð·Ð½Ð°Ðº Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°Ð¿ÑÑ‚Ð¾Ð¹
        
        local percentage = (value - min) / (max - min)
        
        fill.Size = UDim2.new(percentage, 0, 1, 0)
        thumb.Position = UDim2.new(percentage, -9, 0.5, -9)
        valueLabel.Text = tostring(value)
        
        if callback then
            pcall(callback, value)
        end
    end
    
    local dragging = false
    local userInputService = game:GetService("UserInputService")
    
    local function beginDrag()
        dragging = true
    end
    
    local function endDrag()
        dragging = false
    end
    
    thumb.MouseButton1Down:Connect(beginDrag)
    
    track.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            local mouse = userInputService:GetMouseLocation()
            local trackAbsolute = track.AbsolutePosition
            local trackSize = track.AbsoluteSize
            local relativeX = (mouse.X - trackAbsolute.X) / trackSize.X
            local newValue = min + (max - min) * math.clamp(relativeX, 0, 1)
            updateValue(newValue)
            beginDrag()
        end
    end)
    
    userInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            endDrag()
        end
    end)
    
    userInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local mouse = userInputService:GetMouseLocation()
            local trackAbsolute = track.AbsolutePosition
            local trackSize = track.AbsoluteSize
            local relativeX = (mouse.X - trackAbsolute.X) / trackSize.X
            local newValue = min + (max - min) * math.clamp(relativeX, 0, 1)
            updateValue(newValue)
        end
    end)
    
    updateValue(value)
    
    table.insert(self.elements, sliderContainer)
    
    return {
        setValue = function(newValue)
            updateValue(newValue)
        end,
        getValue = function()
            return value
        end
    }
end

function ElegantModMenu:dropdown(name, options, defaultValue, callback, icon)
    local selected = defaultValue or options[1]
    local isOpen = false
    
    local dropdownContainer = createRoundedFrame()
    dropdownContainer.Name = "Dropdown_" .. name
    dropdownContainer.Size = UDim2.new(1, 0, 0, CONFIG.ELEMENT_HEIGHT)
    dropdownContainer.BackgroundColor3 = COLORS.BACKGROUND.SECONDARY
    dropdownContainer.BackgroundTransparency = 0.9
    dropdownContainer.LayoutOrder = #self.elements + 1
    dropdownContainer.ZIndex = 104
    dropdownContainer.Parent = self.contentContainer
    
    local button = Instance.new("TextButton")
    button.Name = "Button"
    button.Size = UDim2.new(1, 0, 1, 0)
    button.BackgroundTransparency = 1
    button.Text = ""
    button.AutoButtonColor = false
    button.ZIndex = 105
    button.Parent = dropdownContainer
    
    local content = Instance.new("Frame")
    content.Name = "Content"
    content.Size = UDim2.new(1, -16, 1, 0)
    content.Position = UDim2.new(0, 8, 0, 0)
    content.BackgroundTransparency = 1
    content.Parent = dropdownContainer
    
    if icon then
        local iconLabel = Instance.new("TextLabel")
        iconLabel.Text = icon
        iconLabel.TextColor3 = COLORS.TEXT.PRIMARY
        iconLabel.BackgroundTransparency = 1
        iconLabel.Font = Enum.Font.GothamMedium
        iconLabel.TextSize = 16
        iconLabel.TextXAlignment = Enum.TextXAlignment.Center
        iconLabel.Size = UDim2.new(0, 28, 1, 0)
        iconLabel.Parent = content
    end
    
    local nameLabel = createTextLabel(name, 15, content)
    nameLabel.Size = UDim2.new(0.6, icon and -32 or -8, 1, 0)
    nameLabel.Position = icon and UDim2.new(0, 32, 0, 0) or UDim2.new(0, 0, 0, 0)
    
    local valueLabel = createTextLabel(selected, 14, content)
    valueLabel.Size = UDim2.new(0.3, -30, 1, 0)
    valueLabel.Position = UDim2.new(0.7, 0, 0, 0)
    valueLabel.TextXAlignment = Enum.TextXAlignment.Right
    valueLabel.TextColor3 = self.accentColor
    
    local arrow = createTextLabel("â–¼", 12, content)
    arrow.Size = UDim2.new(0, 24, 1, 0)
    arrow.Position = UDim2.new(1, -24, 0, 0)
    arrow.TextXAlignment = Enum.TextXAlignment.Center
    arrow.TextColor3 = COLORS.TEXT.SECONDARY
    
    -- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¾Ð¿Ñ†Ð¸Ð¹
    local dropdownList = Instance.new("Frame")
    dropdownList.Name = "DropdownList"
    dropdownList.Size = UDim2.new(1, 0, 0, 0)
    dropdownList.Position = UDim2.new(0, 0, 1, 2)
    dropdownList.BackgroundColor3 = COLORS.BACKGROUND.TERTIARY
    dropdownList.BackgroundTransparency = 0.1
    dropdownList.ClipsDescendants = true
    dropdownList.Visible = false
    dropdownList.ZIndex = 110
    dropdownList.Parent = dropdownContainer
    
    local listCorner = Instance.new("UICorner")
    listCorner.CornerRadius = UDim.new(0, 6)
    listCorner.Parent = dropdownList
    
    local listLayout = Instance.new("UIListLayout")
    listLayout.Padding = UDim.new(0, 2)
    listLayout.SortOrder = Enum.SortOrder.LayoutOrder
    listLayout.Parent = dropdownList
    
    local function updateDropdown()
        dropdownList:ClearAllChildren()
        
        for i, option in ipairs(options) do
            local optionButton = Instance.new("TextButton")
            optionButton.Name = "Option_" .. i
            optionButton.Size = UDim2.new(1, -8, 0, 32)
            optionButton.Position = UDim2.new(0, 4, 0, (i-1)*34)
            optionButton.BackgroundTransparency = 1
            optionButton.Text = option
            optionButton.TextColor3 = option == selected and self.accentColor or COLORS.TEXT.PRIMARY
            optionButton.Font = Enum.Font.GothamMedium
            optionButton.TextSize = 14
            optionButton.AutoButtonColor = false
            optionButton.ZIndex = 111
            optionButton.Parent = dropdownList
            
            local optionOverlay = Instance.new("Frame")
            optionOverlay.Name = "Overlay"
            optionOverlay.Size = UDim2.new(1, 0, 1, 0)
            optionOverlay.BackgroundTransparency = 1
            optionOverlay.BackgroundColor3 = Color3.new(1, 1, 1)
            optionOverlay.ZIndex = 112
            optionOverlay.Parent = optionButton
            
            local optionCorner = Instance.new("UICorner")
            optionCorner.CornerRadius = UDim.new(0, 4)
            optionCorner.Parent = optionOverlay
            
            optionButton.MouseEnter:Connect(function()
                tween(optionOverlay, {BackgroundTransparency = 0.9})
            end)
            
            optionButton.MouseLeave:Connect(function()
                tween(optionOverlay, {BackgroundTransparency = 1})
            end)
            
            optionButton.MouseButton1Click:Connect(function()
                selected = option
                valueLabel.Text = selected
                isOpen = false
                dropdownList.Visible = false
                tween(dropdownList, {Size = UDim2.new(1, 0, 0, 0)})
                tween(arrow, {Rotation = 0})
                
                if callback then
                    pcall(callback, selected)
                end
            end)
        end
        
        local totalHeight = #options * 34
        dropdownList.Size = UDim2.new(1, 0, 0, totalHeight)
    end
    
    updateDropdown()
    
    local function toggleDropdown()
        isOpen = not isOpen
        
        if isOpen then
            dropdownList.Visible = true
            tween(dropdownList, {Size = UDim2.new(1, 0, 0, #options * 34)})
            tween(arrow, {Rotation = 180})
        else
            tween(dropdownList, {Size = UDim2.new(1, 0, 0, 0)})
            tween(arrow, {Rotation = 0})
            task.delay(0.2, function()
                dropdownList.Visible = false
            end)
        end
    end
    
    button.MouseButton1Click:Connect(toggleDropdown)
    
    -- Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¿Ñ€Ð¸ ÐºÐ»Ð¸ÐºÐµ Ð²Ð½Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°
    game:GetService("UserInputService").InputBegan:Connect(function(input)
        if isOpen and input.UserInputType == Enum.UserInputType.MouseButton1 then
            local mousePos = input.Position
            local absPos = dropdownContainer.AbsolutePosition
            local absSize = dropdownContainer.AbsoluteSize
            
            if not (mousePos.X >= absPos.X and mousePos.X <= absPos.X + absSize.X and
                   mousePos.Y >= absPos.Y and mousePos.Y <= absPos.Y + absSize.Y + dropdownList.AbsoluteSize.Y) then
                isOpen = false
                tween(dropdownList, {Size = UDim2.new(1, 0, 0, 0)})
                tween(arrow, {Rotation = 0})
                task.delay(0.2, function()
                    dropdownList.Visible = false
                end)
            end
        end
    end)
    
    table.insert(self.elements, dropdownContainer)
    
    return {
        setSelected = function(option)
            selected = option
            valueLabel.Text = selected
            if callback then
                pcall(callback, selected)
            end
        end,
        getSelected = function()
            return selected
        end,
        updateOptions = function(newOptions)
            options = newOptions
            updateDropdown()
        end
    }
end

-- ÐÐ°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ ÑÐµÐºÑ†Ð¸Ð¹
function ElegantModMenu:setupHomeSection()
    self:button("Welcome to Fatima Menu", function()
        print("Fatima Menu loaded successfully!")
    end, "ðŸ‘‹")
    
    self:button("Quick Start Guide", function()
        print("1. Select a section from the sidebar")
        print("2. Enable desired features")
        print("3. Customize settings as needed")
    end, "ðŸ“–")
    
    self:button("Discord Server", function()
        print("Join our Discord: https://discord.gg/fatima")
    end, "ðŸ’¬")
    
    self:button("Check Updates", function()
        print("Checking for updates...")
    end, "ðŸ”„")
    
    self:button("Open Settings", function()
        self:openSettingsMenu()
    end, "âš™ï¸")
end

function ElegantModMenu:setupLocalSection()
    self.speedToggle = self:toggle("Speed Hack", false, function(state)
        print("Speed Hack:", state)
    end, "âš¡")
    
    self.jumpToggle = self:toggle("Super Jump", false, function(state)
        print("Super Jump:", state)
    end, "ðŸ¦˜")
    
    self.noclipToggle = self:toggle("Noclip", false, function(state)
        print("Noclip:", state)
    end, "ðŸ‘»")
    
    self.flyToggle = self:toggle("Fly", false, function(state)
        print("Fly:", state)
    end, "ðŸ•Šï¸")
    
    self.infiniteJumpToggle = self:toggle("Infinite Jump", false, function(state)
        print("Infinite Jump:", state)
    end, "âˆž")
    
    self.antiAfkToggle = self:toggle("Anti-AFK", true, function(state)
        print("Anti-AFK:", state)
    end, "â°")
end

function ElegantModMenu:setupESPSection()
    self.espToggle = self:toggle("ESP Master Switch", false, function(state)
        print("ESP:", state)
    end, "ðŸŽ¯")
    
    self:button("ESP Settings", function()
        self:openESPSettings()
    end, "âš™ï¸")
    
    self.espBoxToggle = self:toggle("Box ESP", true, function(state)
        print("Box ESP:", state)
    end, "ðŸŸ¦")
    
    self.espTracerToggle = self:toggle("Tracer ESP", true, function(state)
        print("Tracer ESP:", state)
    end, "ðŸ“")
    
    self.espNameToggle = self:toggle("Name ESP", true, function(state)
        print("Name ESP:", state)
    end, "ðŸ“")
    
    self.espHealthToggle = self:toggle("Health Bar", true, function(state)
        print("Health Bar:", state)
    end, "â¤ï¸")
    
    self.espDistanceToggle = self:toggle("Distance ESP", true, function(state)
        print("Distance ESP:", state)
    end, "ðŸ“")
    
    self.espSkeletonToggle = self:toggle("Skeleton ESP", false, function(state)
        print("Skeleton ESP:", state)
    end, "ðŸ’€")
    
    self.espChamsToggle = self:toggle("Chams ESP", false, function(state)
        print("Chams ESP:", state)
    end, "âœ¨")
end

function ElegantModMenu:setupAimSection()
    self.aimToggle = self:toggle("Aimbot Master Switch", false, function(state)
        print("Aimbot:", state)
    end, "ðŸŽ®")
    
    self:button("Aimbot Settings", function()
        self:openAimSettings()
    end, "âš™ï¸")
    
    self.aimTypeDropdown = self:dropdown("Aim Type", {"Legit", "Rage", "Silent"}, "Legit", function(selected)
        print("Aim Type:", selected)
    end, "ðŸŽ¯")
    
    self.aimPartDropdown = self:dropdown("Aim Part", {"Head", "Torso", "HumanoidRootPart"}, "Head", function(selected)
        print("Aim Part:", selected)
    end, "ðŸŽ¯")
    
    self.aimFovSlider = self:slider("FOV", 1, 360, 50, function(value)
        print("FOV:", value)
    end, "â­•")
    
    self.aimSmoothnessSlider = self:slider("Smoothness", 1, 50, 10, function(value)
        print("Smoothness:", value)
    end, "ðŸ“Š")
    
    self.triggerbotToggle = self:toggle("Triggerbot", false, function(state)
        print("Triggerbot:", state)
    end, "ðŸ”«")
    
    self.autoWallToggle = self:toggle("Auto Wall", false, function(state)
        print("Auto Wall:", state)
    end, "ðŸ’¥")
end

function ElegantModMenu:setupVisualSection()
    self.visualFullBrightToggle = self:toggle("Full Bright", false, function(state)
        print("Full Bright:", state)
    end, "ðŸ’¡")
    
    self.visualNightModeToggle = self:toggle("Night Mode", false, function(state)
        print("Night Mode:", state)
    end, "ðŸŒ™")
    
    self.visualFogToggle = self:toggle("Disable Fog", false, function(state)
        print("Disable Fog:", state)
    end, "ðŸŒ«ï¸")
    
    self.visualBrightnessSlider = self:slider("Brightness", 0, 10, 2, function(value)
        print("Brightness:", value)
    end, "â˜€ï¸")
    
    self.visualFovSlider = self:slider("Camera FOV", 70, 120, 70, function(value)
        print("Camera FOV:", value)
    end, "ðŸ“·")
    
    self:button("Reset Visuals", function()
        print("Visuals reset")
    end, "ðŸ”„")
end

function ElegantModMenu:setupMiscSection()
    self.miscAntiKickToggle = self:toggle("Anti-Kick", true, function(state)
        print("Anti-Kick:", state)
    end, "ðŸ›¡ï¸")
    
    self.miscFpsBoostToggle = self:toggle("FPS Boost", false, function(state)
        print("FPS Boost:", state)
    end, "ðŸš€")
    
    self.miscReachToggle = self:toggle("Extended Reach", false, function(state)
        print("Extended Reach:", state)
    end, "ðŸ‘‹")
    
    self.miscAutoFarmToggle = self:toggle("Auto Farm", false, function(state)
        print("Auto Farm:", state)
    end, "ðŸ¤–")
    
    self:button("Server Info", function()
        print("Players:", #game.Players:GetPlayers())
        print("Server Time:", os.date("%H:%M:%S"))
    end, "ðŸ“Š")
    
    self:button("Copy Game ID", function()
        print("Game ID:", game.PlaceId)
    end, "ðŸ“‹")
end

-- ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ (Ð½Ð¾Ð²Ñ‹Ð¹ ÑÑ‚Ð¸Ð»ÑŒ)
function ElegantModMenu:openSettingsMenu()
    if self.settingsWindow and self.settingsWindow.Parent then
        self.settingsWindow:Destroy()
        self.settingsWindow = nil
        return
    end
    
    local settingsWindow = Instance.new("Frame")
    settingsWindow.Name = "SettingsWindow"
    settingsWindow.Size = UDim2.new(0, 600, 0, 500)
    settingsWindow.Position = UDim2.new(0.5, -300, 0.5, -250)
    settingsWindow.BackgroundColor3 = COLORS.BACKGROUND.SETTINGS
    settingsWindow.BackgroundTransparency = 0.05
    settingsWindow.ZIndex = 300
    settingsWindow.Parent = self.screenGui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = settingsWindow
    
    local stroke = Instance.new("UIStroke")
    stroke.Color = self.accentColor
    stroke.Thickness = 2
    stroke.Transparency = 0.15
    stroke.Parent = settingsWindow
    
    -- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº
    local header = Instance.new("Frame")
    header.Name = "Header"
    header.Size = UDim2.new(1, 0, 0, 60)
    header.BackgroundColor3 = self.accentColor
    header.BackgroundTransparency = 0.85
    header.ZIndex = 301
    header.Parent = settingsWindow
    
    local headerCorner = Instance.new("UICorner")
    headerCorner.CornerRadius = UDim.new(0, 12, 0, 0)
    headerCorner.Parent = header
    
    local title = createTextLabel("SETTINGS", 22, header)
    title.Size = UDim2.new(1, -20, 1, 0)
    title.Position = UDim2.new(0, 10, 0, 0)
    title.Font = Enum.Font.GothamBold
    title.TextColor3 = self.accentColor
    
    -- Ð‘Ð¾ÐºÐ¾Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº
    local settingsSidebar = Instance.new("Frame")
    settingsSidebar.Name = "SettingsSidebar"
    settingsSidebar.Size = UDim2.new(0, 180, 1, -70)
    settingsSidebar.Position = UDim2.new(0, 0, 0, 60)
    settingsSidebar.BackgroundColor3 = COLORS.BACKGROUND.SIDEBAR
    settingsSidebar.BackgroundTransparency = 0.05
    settingsSidebar.ZIndex = 301
    settingsSidebar.Parent = settingsWindow
    
    local sidebarCorner = Instance.new("UICorner")
    sidebarCorner.CornerRadius = UDim.new(0, 0, 0, 12)
    sidebarCorner.Parent = settingsSidebar
    
    -- ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº
    local settingsContent = Instance.new("ScrollingFrame")
    settingsContent.Name = "SettingsContent"
    settingsContent.Size = UDim2.new(1, -190, 1, -70)
    settingsContent.Position = UDim2.new(0, 190, 0, 60)
    settingsContent.BackgroundTransparency = 1
    settingsContent.ScrollBarThickness = 4
    settingsContent.ScrollBarImageColor3 = self.accentColor
    settingsContent.ScrollBarImageTransparency = 0.8
    settingsContent.ZIndex = 302
    settingsContent.Parent = settingsWindow
    
    local contentLayout = Instance.new("UIListLayout")
    contentLayout.Padding = UDim.new(0, 15)
    contentLayout.SortOrder = Enum.SortOrder.LayoutOrder
    contentLayout.Parent = settingsContent
    
    -- ÐšÐ½Ð¾Ð¿ÐºÐ¸ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹
    local categories = {
        {name = "AIM", icon = "ðŸŽ®"},
        {name = "ESP", icon = "ðŸŽ¯"},
        {name = "MENU", icon = "âš™ï¸"},
        {name = "MISC", icon = "ðŸ”§"}
    }
    
    local activeCategory = "AIM"
    
    local function createCategoryButton(catName, catIcon, index)
        local catButton = Instance.new("TextButton")
        catButton.Name = "Cat_" .. catName
        catButton.Size = UDim2.new(1, -10, 0, 42)
        catButton.Position = UDim2.new(0, 5, 0, (index-1)*52)
        catButton.BackgroundColor3 = activeCategory == catName and self.accentColor or COLORS.BACKGROUND.TERTIARY
        catButton.BackgroundTransparency = activeCategory == catName and 0.8 or 0.9
        catButton.Text = ""
        catButton.AutoButtonColor = false
        catButton.ZIndex = 302
        catButton.Parent = settingsSidebar
        
        local buttonCorner = Instance.new("UICorner")
        buttonCorner.CornerRadius = UDim.new(0, 6)
        buttonCorner.Parent = catButton
        
        local buttonContent = Instance.new("Frame")
        buttonContent.Name = "Content"
        buttonContent.Size = UDim2.new(1, -10, 1, -10)
        buttonContent.Position = UDim2.new(0, 5, 0, 5)
        buttonContent.BackgroundTransparency = 1
        buttonContent.Parent = catButton
        
        local iconLabel = createTextLabel(catIcon, 16, buttonContent)
        iconLabel.Size = UDim2.new(0, 30, 1, 0)
        iconLabel.TextXAlignment = Enum.TextXAlignment.Center
        
        local nameLabel = createTextLabel(catName, 14, buttonContent)
        nameLabel.Size = UDim2.new(1, -34, 1, 0)
        nameLabel.Position = UDim2.new(0, 34, 0, 0)
        nameLabel.Font = Enum.Font.GothamMedium
        
        catButton.MouseButton1Click:Connect(function()
            activeCategory = catName
            
            -- ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÐºÐ½Ð¾Ð¿ÐºÐ¸
            for _, child in ipairs(settingsSidebar:GetChildren()) do
                if child:IsA("TextButton") then
                    local isActive = child.Name == "Cat_" .. catName
                    tween(child, {
                        BackgroundColor3 = isActive and self.accentColor or COLORS.BACKGROUND.TERTIARY,
                        BackgroundTransparency = isActive and 0.8 or 0.9
                    })
                end
            end
            
            -- ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚
            settingsContent:ClearAllChildren()
            
            -- Ð—Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸
            if catName == "AIM" then
                self:setupAimSettings(settingsContent)
            elseif catName == "ESP" then
                self:setupESPSettings(settingsContent)
            elseif catName == "MENU" then
                self:setupMenuSettings(settingsContent)
            elseif catName == "MISC" then
                self:setupMiscSettings(settingsContent)
            end
        end)
        
        return catButton
    end
    
    for i, cat in ipairs(categories) do
        createCategoryButton(cat.name, cat.icon, i)
    end
    
    -- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ñ
    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 36, 0, 36)
    closeButton.Position = UDim2.new(1, -46, 0, 12)
    closeButton.BackgroundColor3 = Color3.fromRGB(220, 80, 80)
    closeButton.BackgroundTransparency = 0.8
    closeButton.Text = "âœ•"
    closeButton.TextColor3 = COLORS.TEXT.PRIMARY
    closeButton.TextSize = 18
    closeButton.Font = Enum.Font.GothamMedium
    closeButton.AutoButtonColor = false
    closeButton.ZIndex = 303
    closeButton.Parent = settingsWindow
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 8)
    closeCorner.Parent = closeButton
    
    closeButton.MouseButton1Click:Connect(function()
        settingsWindow:Destroy()
        self.settingsWindow = nil
    end)
    
    -- Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ Ð¿ÐµÑ€Ð²ÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ
    settingsContent:ClearAllChildren()
    self:setupAimSettings(settingsContent)
    
    self.settingsWindow = settingsWindow
end

function ElegantModMenu:setupAimSettings(container)
    -- AIM Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¸Ð· ÐºÐ°Ñ€Ñ‚Ð¸Ð½ÐºÐ¸
    local aimFunctions = {
        "Silent Aim - Ð‘ÐµÐ· Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ ÐºÑƒÑ€ÑÐ¾Ñ€Ð°, Ð¿ÑƒÐ»Ð¸ Ð»ÐµÑ‚ÑÑ‚ Ð² Ñ†ÐµÐ»ÑŒ",
        "Legit Aim - ÐŸÐ»Ð°Ð²Ð½Ð¾Ðµ Ð´Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ ÐºÑƒÑ€ÑÐ¾Ñ€Ð° Ð´Ð¾ Ñ†ÐµÐ»Ð¸",
        "Rage Aim - ÐœÐ³Ð½Ð¾Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ð·Ð°Ñ…Ð²Ð°Ñ‚ Ñ†ÐµÐ»Ð¸",
        "Triggerbot - ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð²Ñ‹ÑÑ‚Ñ€ÐµÐ» Ð¿Ñ€Ð¸ Ð½Ð°Ð²ÐµÐ´ÐµÐ½Ð¸Ð¸ Ð½Ð° Ñ†ÐµÐ»ÑŒ",
        "FOV Aim - ÐŸÑ€Ð¸Ñ†ÐµÐ»Ð¸Ð²Ð°Ð½Ð¸Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð² Ð¿Ñ€ÐµÐ´ÐµÐ»Ð°Ñ… ÐºÑ€ÑƒÐ³Ð°",
        "Bone Aim - Ð’Ñ‹Ð±Ð¾Ñ€ ÐºÐ¾ÑÑ‚Ð¸ Ð´Ð»Ñ Ð¿Ñ€Ð¸Ñ†ÐµÐ»Ð¸Ð²Ð°Ð½Ð¸Ñ",
        "Prediction Aim - ÐŸÑ€ÐµÐ´ÑÐºÐ°Ð·Ð°Ð½Ð¸Ðµ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ Ñ†ÐµÐ»Ð¸",
        "Humanizer - Ð˜Ð¼Ð¸Ñ‚Ð°Ñ†Ð¸Ñ Ñ‡ÐµÐ»Ð¾Ð²ÐµÑ‡ÐµÑÐºÐ¸Ñ… Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ð¹ Ð¼Ñ‹ÑˆÐ¸",
        "AutoWall - Ð¡Ñ‚Ñ€ÐµÐ»ÑŒÐ±Ð° ÑÐºÐ²Ð¾Ð·ÑŒ ÑÑ‚ÐµÐ½Ñ‹",
        "Aim Assist - ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð² Ð¿Ñ€Ð¸Ñ†ÐµÐ»Ð¸Ð²Ð°Ð½Ð¸Ð¸",
        "Spinbot - ÐŸÐ¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾Ðµ Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ ÑƒÐºÐ»Ð¾Ð½ÐµÐ½Ð¸Ñ",
        "Resolver - ÐšÐ¾Ñ€Ñ€ÐµÐºÑ†Ð¸Ñ Ð¿Ñ€Ð¸ Ð´ÐµÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ñ…Ð¸Ñ‚Ð±Ð¾ÐºÑÐ¾Ð²"
    }
    
    local sectionTitle = createTextLabel("AIM FUNCTIONS", 18, container)
    sectionTitle.Size = UDim2.new(1, 0, 0, 30)
    sectionTitle.Font = Enum.Font.GothamBold
    sectionTitle.TextColor3 = self.accentColor
    sectionTitle.LayoutOrder = 1
    
    for i, func in ipairs(aimFunctions) do
        local funcToggle = self:createSettingsToggle(container, func, false, i + 1)
        
        -- ÐŸÑ€Ð¸Ð²ÑÐ·Ñ‹Ð²Ð°ÐµÐ¼ Ðº Ð¸Ð³Ñ€Ð¾ÐºÐ°Ð¼ Adro, adroments
        funcToggle.MouseButton1Click:Connect(function()
            local players = game:GetService("Players"):GetPlayers()
            for _, player in ipairs(players) do
                if player.Name:lower():find("adro") then
                    print("Applied AIM function to player:", player.Name)
                    -- Ð—Ð´ÐµÑÑŒ Ð±ÑƒÐ´ÐµÑ‚ Ð»Ð¾Ð³Ð¸ÐºÐ° Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ AIM Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸
                end
            end
        end)
    end
end

function ElegantModMenu:setupESPSettings(container)
    -- ESP Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¸Ð· ÐºÐ°Ñ€Ñ‚Ð¸Ð½ÐºÐ¸
    local espFunctions = {
        "Box ESP - Ð Ð°Ð¼ÐºÐ° Ð²Ð¾ÐºÑ€ÑƒÐ³ Ñ†ÐµÐ»Ð¸",
        "Tracer/Line ESP - Ð›Ð¸Ð½Ð¸Ñ Ðº Ñ†ÐµÐ»Ð¸",
        "Head Circle/Dot ESP - ÐšÑ€ÑƒÐ³ Ð¸Ð»Ð¸ Ñ‚Ð¾Ñ‡ÐºÐ° Ð½Ð° Ð³Ð¾Ð»Ð¾Ð²Ðµ",
        "Health Bar ESP - ÐŸÐ¾Ð»Ð¾ÑÐºÐ° Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ",
        "Name ESP - Ð˜Ð¼Ñ Ð¸Ð³Ñ€Ð¾ÐºÐ°",
        "Distance ESP - Ð”Ð¸ÑÑ‚Ð°Ð½Ñ†Ð¸Ñ Ð´Ð¾ Ñ†ÐµÐ»Ð¸",
        "Chams/Glow ESP - ÐŸÐ¾Ð´ÑÐ²ÐµÑ‚ÐºÐ° Ð¼Ð¾Ð´ÐµÐ»Ð¸",
        "Skeleton/Bones ESP - Ð¡ÐºÐµÐ»ÐµÑ‚ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð¶Ð°",
        "Radar ESP - ÐœÐ¸Ð½Ð¸-ÐºÐ°Ñ€Ñ‚Ð° Ñ Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð½Ð¸ÐºÐ°Ð¼Ð¸",
        "Item/Weapon ESP - ÐŸÐ¾Ð´ÑÐ²ÐµÑ‚ÐºÐ° Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð¾Ð²",
        "Wall Hack - Ð’Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½ÐµÐµ ÑÐºÐ²Ð¾Ð·ÑŒ ÑÑ‚ÐµÐ½Ñ‹",
        "Snap Lines - Ð›Ð¸Ð½Ð¸Ð¸ Ð¿Ñ€Ð¸Ñ†ÐµÐ»Ð¸Ð²Ð°Ð½Ð¸Ñ",
        "Info ESP - ÐšÐ¾Ð¼Ð±Ð¸Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ",
        "Crosshair ESP - Ð”Ð¾Ð¿. Ð¿Ñ€Ð¸Ñ†ÐµÐ» Ð½Ð° Ñ†ÐµÐ»Ð¸",
        "Backtrack ESP - ÐŸÐ¾ÐºÐ°Ð· Ð¿Ñ€Ð¾ÑˆÐ»Ñ‹Ñ… Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¹"
    }
    
    local sectionTitle = createTextLabel("ESP FUNCTIONS", 18, container)
    sectionTitle.Size = UDim2.new(1, 0, 0, 30)
    sectionTitle.Font = Enum.Font.GothamBold
    sectionTitle.TextColor3 = self.accentColor
    sectionTitle.LayoutOrder = 1
    
    for i, func in ipairs(espFunctions) do
        local funcToggle = self:createSettingsToggle(container, func, false, i + 1)
        
        -- ÐŸÑ€Ð¸Ð²ÑÐ·Ñ‹Ð²Ð°ÐµÐ¼ Ðº Ð¸Ð³Ñ€Ð¾ÐºÐ°Ð¼ Adro, adroments Ð² CoreGui
        funcToggle.MouseButton1Click:Connect(function()
            local coreGui = game:GetService("CoreGui")
            local players = game:GetService("Players"):GetPlayers()
            
            for _, player in ipairs(players) do
                if player.Name:lower():find("adro") then
                    -- Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¿Ð°Ð¿ÐºÑƒ Ð´Ð»Ñ ESP Ð² CoreGui
                    local espFolder = coreGui:FindFirstChild("ESP_Folder") or Instance.new("Folder")
                    espFolder.Name = "ESP_Folder"
                    espFolder.Parent = coreGui
                    
                    -- Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¼ÐµÑ‚ÐºÑƒ Ð´Ð»Ñ Ð¸Ð³Ñ€Ð¾ÐºÐ°
                    local playerLabel = Instance.new("TextLabel")
                    playerLabel.Name = "ESP_" .. player.Name
                    playerLabel.Text = player.Name .. " - " .. func
                    playerLabel.TextColor3 = self.accentColor
                    playerLabel.BackgroundTransparency = 1
                    playerLabel.Font = Enum.Font.GothamMedium
                    playerLabel.TextSize = 14
                    playerLabel.Parent = espFolder
                    
                    print("Applied ESP function to player:", player.Name)
                end
            end
        end)
    end
end

function ElegantModMenu:setupMenuSettings(container)
    local sectionTitle = createTextLabel("MENU SETTINGS", 18, container)
    sectionTitle.Size = UDim2.new(1, 0, 0, 30)
    sectionTitle.Font = Enum.Font.GothamBold
    sectionTitle.TextColor3 = self.accentColor
    sectionTitle.LayoutOrder = 1
    
    -- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¿Ñ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ð¾ÑÑ‚Ð¸ Ð¼ÐµÐ½ÑŽ
    local opacitySlider = self:createSettingsSlider(container, "Menu Opacity", 0.5, 1, self.settings.menuOpacity, 2)
    opacitySlider.MouseButton1Click:Connect(function(value)
        self.settings.menuOpacity = value
        if self.window then
            self.window.BackgroundTransparency = 1 - value
        end
    end)
    
    -- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð²Ð¾Ð´ÑÐ½Ñ‹Ñ… Ð·Ð½Ð°ÐºÐ¾Ð²
    local watermarkToggle = self:createSettingsToggle(container, "Show Watermarks", self.settings.showWatermark, 3)
    watermarkToggle.MouseButton1Click:Connect(function(state)
        self.settings.showWatermark = state
        for _, watermark in ipairs(self.watermarkInstances) do
            watermark.Visible = state
        end
    end)
    
    local watermarkSpeed = self:createSettingsSlider(container, "Watermark Speed", 0.5, 3, self.settings.watermarkSpeed, 4)
    watermarkSpeed.MouseButton1Click:Connect(function(value)
        self.settings.watermarkSpeed = value
    end)
    
    local watermarkCount = self:createSettingsSlider(container, "Watermark Count", 1, 15, self.settings.watermarkCount, 5, true)
    watermarkCount.MouseButton1Click:Connect(function(value)
        self.settings.watermarkCount = math.floor(value)
        -- ÐŸÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°ÐµÐ¼ Ð²Ð¾Ð´ÑÐ½Ñ‹Ðµ Ð·Ð½Ð°ÐºÐ¸
        for _, watermark in ipairs(self.watermarkInstances) do
            watermark:Destroy()
        end
        self.watermarkInstances = {}
        self:createWatermarks()
    end)
    
    local watermarkText = self:createSettingsInput(container, "Watermark Text", self.settings.watermarkText, 6)
    watermarkText.MouseButton1Click:Connect(function(text)
        self.settings.watermarkText = text
        for _, watermark in ipairs(self.watermarkInstances) do
            watermark.Text = text
        end
    end)
end

function ElegantModMenu:setupMiscSettings(container)
    local sectionTitle = createTextLabel("MISC SETTINGS", 18, container)
    sectionTitle.Size = UDim2.new(1, 0, 0, 30)
    sectionTitle.Font = Enum.Font.GothamBold
    sectionTitle.TextColor3 = self.accentColor
    sectionTitle.LayoutOrder = 1
    
    self:createSettingsToggle(container, "Anti-Kick Protection", true, 2)
    self:createSettingsToggle(container, "FPS Boost", false, 3)
    self:createSettingsToggle(container, "Auto Rejoin", true, 4)
    self:createSettingsToggle(container, "Hide Menu Keybind", false, 5)
    self:createSettingsToggle(container, "Notifications", true, 6)
end

function ElegantModMenu:createSettingsToggle(container, text, defaultState, layoutOrder)
    local toggleFrame = createRoundedFrame()
    toggleFrame.Size = UDim2.new(1, 0, 0, 40)
    toggleFrame.BackgroundColor3 = COLORS.BACKGROUND.SECONDARY
    toggleFrame.BackgroundTransparency = 0.9
    toggleFrame.LayoutOrder = layoutOrder
    toggleFrame.ZIndex = 303
    toggleFrame.Parent = container
    
    local toggle = Instance.new("TextButton")
    toggle.Size = UDim2.new(1, 0, 1, 0)
    toggle.BackgroundTransparency = 1
    toggle.Text = ""
    toggle.AutoButtonColor = false
    toggle.ZIndex = 304
    toggle.Parent = toggleFrame
    
    local content = Instance.new("Frame")
    content.Size = UDim2.new(1, -16, 1, 0)
    content.Position = UDim2.new(0, 8, 0, 0)
    content.BackgroundTransparency = 1
    content.Parent = toggleFrame
    
    local textLabel = createTextLabel(text, 14, content)
    textLabel.Size = UDim2.new(0.8, 0, 1, 0)
    
    local state = defaultState
    local toggleFrame = Instance.new("Frame")
    toggleFrame.Size = UDim2.new(0, 48, 0, 26)
    toggleFrame.Position = UDim2.new(1, -56, 0.5, -13)
    toggleFrame.BackgroundColor3 = state and self.accentColor or COLORS.BACKGROUND.TERTIARY
    toggleFrame.BackgroundTransparency = 0.8
    toggleFrame.BorderSizePixel = 0
    toggleFrame.ZIndex = 305
    toggleFrame.Parent = content
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 13)
    toggleCorner.Parent = toggleFrame
    
    local toggleCircle = Instance.new("Frame")
    toggleCircle.Size = UDim2.new(0, 20, 0, 20)
    toggleCircle.Position = state and UDim2.new(1, -22, 0.5, -10) or UDim2.new(0, 3, 0.5, -10)
    toggleCircle.BackgroundColor3 = COLORS.TEXT.PRIMARY
    toggleCircle.BorderSizePixel = 0
    toggleCircle.ZIndex = 306
    toggleCircle.Parent = toggleFrame
    
    local circleCorner = Instance.new("UICorner")
    circleCorner.CornerRadius = UDim.new(0.5, 0)
    circleCorner.Parent = toggleCircle
    
    local function setState(newState)
        state = newState
        
        tween(toggleFrame, {
            BackgroundColor3 = state and self.accentColor or COLORS.BACKGROUND.TERTIARY
        })
        
        tween(toggleCircle, {
            Position = state and UDim2.new(1, -22, 0.5, -10) or UDim2.new(0, 3, 0.5, -10)
        })
    end
    
    toggle.MouseButton1Click:Connect(function()
        setState(not state)
    end)
    
    return toggle
end

function ElegantModMenu:createSettingsSlider(container, text, min, max, defaultValue, layoutOrder, isInt)
    local sliderContainer = createRoundedFrame()
    sliderContainer.Size = UDim2.new(1, 0, 0, 65)
    sliderContainer.BackgroundColor3 = COLORS.BACKGROUND.SECONDARY
    sliderContainer.BackgroundTransparency = 0.9
    sliderContainer.LayoutOrder = layoutOrder
    sliderContainer.ZIndex = 303
    sliderContainer.Parent = container
    
    local header = Instance.new("Frame")
    header.Size = UDim2.new(1, -16, 0, 24)
    header.Position = UDim2.new(0, 8, 0, 5)
    header.BackgroundTransparency = 1
    header.Parent = sliderContainer
    
    local nameLabel = createTextLabel(text, 14, header)
    nameLabel.Size = UDim2.new(0.6, 0, 1, 0)
    
    local valueLabel = createTextLabel(tostring(defaultValue), 14, header)
    valueLabel.Size = UDim2.new(0.4, -5, 1, 0)
    valueLabel.Position = UDim2.new(0.6, 5, 0, 0)
    valueLabel.TextXAlignment = Enum.TextXAlignment.Right
    valueLabel.TextColor3 = self.accentColor
    
    local track = Instance.new("Frame")
    track.Size = UDim2.new(1, -16, 0, 8)
    track.Position = UDim2.new(0, 8, 0, 40)
    track.BackgroundColor3 = COLORS.BACKGROUND.TERTIARY
    track.BorderSizePixel = 0
    track.ZIndex = 304
    track.Parent = sliderContainer
    
    local trackCorner = Instance.new("UICorner")
    trackCorner.CornerRadius = UDim.new(0, 4)
    trackCorner.Parent = track
    
    local fill = Instance.new("Frame")
    fill.Size = UDim2.new(0, 0, 1, 0)
    fill.BackgroundColor3 = self.accentColor
    fill.BorderSizePixel = 0
    fill.ZIndex = 305
    fill.Parent = track
    
    local fillCorner = Instance.new("UICorner")
    fillCorner.CornerRadius = UDim.new(0, 4)
    fillCorner.Parent = fill
    
    local thumb = Instance.new("TextButton")
    thumb.Size = UDim2.new(0, 18, 0, 18)
    thumb.Position = UDim2.new(0, -9, 0.5, -9)
    thumb.BackgroundColor3 = COLORS.TEXT.PRIMARY
    thumb.BorderSizePixel = 0
    thumb.Text = ""
    thumb.AutoButtonColor = false
    thumb.ZIndex = 306
    thumb.Parent = track
    
    local thumbCorner = Instance.new("UICorner")
    thumbCorner.CornerRadius = UDim.new(0.5, 0)
    thumbCorner.Parent = thumb
    
    local function updateValue(newValue)
        local value = math.clamp(newValue, min, max)
        if isInt then
            value = math.floor(value)
        else
            value = math.floor(value * 10) / 10
        end
        
        local percentage = (value - min) / (max - min)
        
        fill.Size = UDim2.new(percentage, 0, 1, 0)
        thumb.Position = UDim2.new(percentage, -9, 0.5, -9)
        valueLabel.Text = tostring(value)
        
        return value
    end
    
    local dragging = false
    local userInputService = game:GetService("UserInputService")
    
    thumb.MouseButton1Down:Connect(function()
        dragging = true
    end)
    
    track.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            local mouse = userInputService:GetMouseLocation()
            local trackAbsolute = track.AbsolutePosition
            local trackSize = track.AbsoluteSize
            local relativeX = (mouse.X - trackAbsolute.X) / trackSize.X
            local newValue = min + (max - min) * math.clamp(relativeX, 0, 1)
            updateValue(newValue)
            dragging = true
        end
    end)
    
    userInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    userInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local mouse = userInputService:GetMouseLocation()
            local trackAbsolute = track.AbsolutePosition
            local trackSize = track.AbsoluteSize
            local relativeX = (mouse.X - trackAbsolute.X) / trackSize.X
            local newValue = min + (max - min) * math.clamp(relativeX, 0, 1)
            updateValue(newValue)
        end
    end)
    
    updateValue(defaultValue)
    
    return {
        MouseButton1Click = function(callback)
            track.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    local mouse = userInputService:GetMouseLocation()
                    local trackAbsolute = track.AbsolutePosition
                    local trackSize = track.AbsoluteSize
                    local relativeX = (mouse.X - trackAbsolute.X) / trackSize.X
                    local newValue = min + (max - min) * math.clamp(relativeX, 0, 1)
                    local value = updateValue(newValue)
                    if callback then
                        pcall(callback, value)
                    end
                end
            end)
        end
    }
end

function ElegantModMenu:createSettingsInput(container, text, defaultValue, layoutOrder)
    local inputContainer = createRoundedFrame()
    inputContainer.Size = UDim2.new(1, 0, 0, 40)
    inputContainer.BackgroundColor3 = COLORS.BACKGROUND.SECONDARY
    inputContainer.BackgroundTransparency = 0.9
    inputContainer.LayoutOrder = layoutOrder
    inputContainer.ZIndex = 303
    inputContainer.Parent = container
    
    local content = Instance.new("Frame")
    content.Size = UDim2.new(1, -16, 1, 0)
    content.Position = UDim2.new(0, 8, 0, 0)
    content.BackgroundTransparency = 1
    content.Parent = inputContainer
    
    local nameLabel = createTextLabel(text, 14, content)
    nameLabel.Size = UDim2.new(0.5, 0, 1, 0)
    
    local textBox = Instance.new("TextBox")
    textBox.Size = UDim2.new(0.5, -10, 0.7, 0)
    textBox.Position = UDim2.new(0.5, 5, 0.15, 0)
    textBox.Text = defaultValue
    textBox.TextColor3 = COLORS.TEXT.PRIMARY
    textBox.BackgroundColor3 = COLORS.BACKGROUND.TERTIARY
    textBox.BackgroundTransparency = 0.8
    textBox.Font = Enum.Font.GothamMedium
    textBox.TextSize = 13
    textBox.ZIndex = 304
    textBox.Parent = content
    
    local textBoxCorner = Instance.new("UICorner")
    textBoxCorner.CornerRadius = UDim.new(0, 4)
    textBoxCorner.Parent = textBox
    
    return {
        MouseButton1Click = function(callback)
            textBox.FocusLost:Connect(function(enterPressed)
                if enterPressed then
                    if callback then
                        pcall(callback, textBox.Text)
                    end
                end
            end)
        end
    }
end

-- ÐžÐºÐ½Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº ESP (ÑÑ‚Ð°Ñ€Ð¾Ðµ)
function ElegantModMenu:openESPSettings()
    if self.espSettingsWindow and self.espSettingsWindow.Parent then
        self.espSettingsWindow:Destroy()
        self.espSettingsWindow = nil
        return
    end
    
    local settingsWindow = Instance.new("Frame")
    settingsWindow.Name = "ESPSettingsWindow"
    settingsWindow.Size = UDim2.new(0, 400, 0, 450)
    settingsWindow.Position = UDim2.new(0.5, -200, 0.5, -225)
    settingsWindow.BackgroundColor3 = COLORS.BACKGROUND.PRIMARY
    settingsWindow.BackgroundTransparency = 0.05
    settingsWindow.ZIndex = 300
    settingsWindow.Parent = self.screenGui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = settingsWindow
    
    local stroke = Instance.new("UIStroke")
    stroke.Color = self.accentColor
    stroke.Thickness = 2
    stroke.Transparency = 0.15
    stroke.Parent = settingsWindow
    
    -- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº
    local header = Instance.new("Frame")
    header.Name = "Header"
    header.Size = UDim2.new(1, 0, 0, 60)
    header.BackgroundColor3 = self.accentColor
    header.BackgroundTransparency = 0.85
    header.ZIndex = 301
    header.Parent = settingsWindow
    
    local headerCorner = Instance.new("UICorner")
    headerCorner.CornerRadius = UDim.new(0, 12, 0, 0)
    headerCorner.Parent = header
    
    local title = createTextLabel("ESP SETTINGS", 20, header)
    title.Size = UDim2.new(1, -20, 1, 0)
    title.Position = UDim2.new(0, 10, 0, 0)
    title.Font = Enum.Font.GothamBold
    title.TextColor3 = self.accentColor
    
    -- ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚
    local content = Instance.new("ScrollingFrame")
    content.Name = "Content"
    content.Size = UDim2.new(1, -20, 1, -80)
    content.Position = UDim2.new(0, 10, 0, 70)
    content.BackgroundTransparency = 1
    content.ScrollBarThickness = 4
    content.ZIndex = 302
    content.Parent = settingsWindow
    
    local list = Instance.new("UIListLayout")
    list.Padding = UDim.new(0, 10)
    list.SortOrder = Enum.SortOrder.LayoutOrder
    list.Parent = content
    
    -- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ñ†Ð²ÐµÑ‚Ð°
    local colorSection = createRoundedFrame()
    colorSection.Size = UDim2.new(1, 0, 0, 40)
    colorSection.BackgroundColor3 = COLORS.BACKGROUND.SECONDARY
    colorSection.BackgroundTransparency = 0.9
    colorSection.LayoutOrder = 1
    colorSection.Parent = content
    
    local colorTitle = createTextLabel("ESP Color", 16, colorSection)
    colorTitle.Size = UDim2.new(1, -16, 1, 0)
    colorTitle.Position = UDim2.new(0, 8, 0, 0)
    colorTitle.TextColor3 = self.accentColor
    colorTitle.Font = Enum.Font.GothamBold
    
    -- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ñ
    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 36, 0, 36)
    closeButton.Position = UDim2.new(1, -46, 0, 12)
    closeButton.BackgroundColor3 = Color3.fromRGB(220, 80, 80)
    closeButton.BackgroundTransparency = 0.8
    closeButton.Text = "âœ•"
    closeButton.TextColor3 = COLORS.TEXT.PRIMARY
    closeButton.TextSize = 18
    closeButton.Font = Enum.Font.GothamMedium
    closeButton.AutoButtonColor = false
    closeButton.ZIndex = 303
    closeButton.Parent = settingsWindow
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 8)
    closeCorner.Parent = closeButton
    
    closeButton.MouseButton1Click:Connect(function()
        settingsWindow:Destroy()
        self.espSettingsWindow = nil
    end)
    
    self.espSettingsWindow = settingsWindow
end

-- ÐžÐºÐ½Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº AimBot (ÑÑ‚Ð°Ñ€Ð¾Ðµ)
function ElegantModMenu:openAimSettings()
    if self.aimSettingsWindow and self.aimSettingsWindow.Parent then
        self.aimSettingsWindow:Destroy()
        self.aimSettingsWindow = nil
        return
    end
    
    local settingsWindow = Instance.new("Frame")
    settingsWindow.Name = "AimSettingsWindow"
    settingsWindow.Size = UDim2.new(0, 400, 0, 450)
    settingsWindow.Position = UDim2.new(0.5, -200, 0.5, -225)
    settingsWindow.BackgroundColor3 = COLORS.BACKGROUND.PRIMARY
    settingsWindow.BackgroundTransparency = 0.05
    settingsWindow.ZIndex = 300
    settingsWindow.Parent = self.screenGui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = settingsWindow
    
    local stroke = Instance.new("UIStroke")
    stroke.Color = self.accentColor
    stroke.Thickness = 2
    stroke.Transparency = 0.15
    stroke.Parent = settingsWindow
    
    -- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº
    local header = Instance.new("Frame")
    header.Name = "Header"
    header.Size = UDim2.new(1, 0, 0, 60)
    header.BackgroundColor3 = self.accentColor
    header.BackgroundTransparency = 0.85
    header.ZIndex = 301
    header.Parent = settingsWindow
    
    local headerCorner = Instance.new("UICorner")
    headerCorner.CornerRadius = UDim.new(0, 12, 0, 0)
    headerCorner.Parent = header
    
    local title = createTextLabel("AIMBOT SETTINGS", 20, header)
    title.Size = UDim2.new(1, -20, 1, 0)
    title.Position = UDim2.new(0, 10, 0, 0)
    title.Font = Enum.Font.GothamBold
    title.TextColor3 = self.accentColor
    
    -- ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚
    local content = Instance.new("ScrollingFrame")
    content.Name = "Content"
    content.Size = UDim2.new(1, -20, 1, -80)
    content.Position = UDim2.new(0, 10, 0, 70)
    content.BackgroundTransparency = 1
    content.ScrollBarThickness = 4
    content.ZIndex = 302
    content.Parent = settingsWindow
    
    local list = Instance.new("UIListLayout")
    list.Padding = UDim.new(0, 10)
    list.SortOrder = Enum.SortOrder.LayoutOrder
    list.Parent = content
    
    -- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
    local predictionSection = createRoundedFrame()
    predictionSection.Size = UDim2.new(1, 0, 0, 40)
    predictionSection.BackgroundColor3 = COLORS.BACKGROUND.SECONDARY
    predictionSection.BackgroundTransparency = 0.9
    predictionSection.LayoutOrder = 1
    predictionSection.Parent = content
    
    local predictionTitle = createTextLabel("Prediction Settings", 16, predictionSection)
    predictionTitle.Size = UDim2.new(1, -16, 1, 0)
    predictionTitle.Position = UDim2.new(0, 8, 0, 0)
    predictionTitle.TextColor3 = self.accentColor
    predictionTitle.Font = Enum.Font.GothamBold
    
    -- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ñ
    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 36, 0, 36)
    closeButton.Position = UDim2.new(1, -46, 0, 12)
    closeButton.BackgroundColor3 = Color3.fromRGB(220, 80, 80)
    closeButton.BackgroundTransparency = 0.8
    closeButton.Text = "âœ•"
    closeButton.TextColor3 = COLORS.TEXT.PRIMARY
    closeButton.TextSize = 18
    closeButton.Font = Enum.Font.GothamMedium
    closeButton.AutoButtonColor = false
    closeButton.ZIndex = 303
    closeButton.Parent = settingsWindow
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 8)
    closeCorner.Parent = closeButton
    
    closeButton.MouseButton1Click:Connect(function()
        settingsWindow:Destroy()
        self.aimSettingsWindow = nil
    end)
    
    self.aimSettingsWindow = settingsWindow
end

-- Ð¤Ð°Ð±Ñ€Ð¸Ñ‡Ð½Ð°Ñ ÐºÐ½Ð¾Ð¿ÐºÐ°
function ElegantModMenu:createFabButton()
    self.fabButton = Instance.new("TextButton")
    self.fabButton.Name = "FabButton"
    self.fabButton.Size = UDim2.new(0, CONFIG.FAB_SIZE, 0, CONFIG.FAB_SIZE)
    self.fabButton.Position = UDim2.new(1, -70, 1, -70)
    self.fabButton.BackgroundColor3 = self.accentColor
    self.fabButton.BackgroundTransparency = 0.2
    self.fabButton.Text = self.icon
    self.fabButton.TextColor3 = COLORS.TEXT.PRIMARY
    self.fabButton.TextSize = 24
    self.fabButton.Font = Enum.Font.GothamBold
    self.fabButton.AutoButtonColor = false
    self.fabButton.Visible = true
    self.fabButton.ZIndex = 200
    self.fabButton.Parent = self.screenGui
    
    local fabCorner = Instance.new("UICorner")
    fabCorner.CornerRadius = UDim.new(1, 0)
    fabCorner.Parent = self.fabButton
    
    local fabStroke = Instance.new("UIStroke")
    fabStroke.Color = self.accentColor
    fabStroke.Thickness = 2
    fabStroke.Transparency = 0.3
    fabStroke.Parent = self.fabButton
    
    self.fabButton.MouseButton1Click:Connect(function()
        self:toggle()
    end)
    
    -- Ð­Ñ„Ñ„ÐµÐºÑ‚Ñ‹
    self.fabButton.MouseEnter:Connect(function()
        tween(self.fabButton, {
            BackgroundTransparency = 0.1,
            Size = UDim2.new(0, CONFIG.FAB_SIZE + 10, 0, CONFIG.FAB_SIZE + 10),
            Position = UDim2.new(1, -75, 1, -75)
        })
    end)
    
    self.fabButton.MouseLeave:Connect(function()
        tween(self.fabButton, {
            BackgroundTransparency = 0.2,
            Size = UDim2.new(0, CONFIG.FAB_SIZE, 0, CONFIG.FAB_SIZE),
            Position = UDim2.new(1, -70, 1, -70)
        })
    end)
end

-- ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹
function ElegantModMenu:toggle()
    if self.window.Visible then
        self:hide()
    else
        self:show()
    end
end

function ElegantModMenu:show()
    if self.window.Visible then return end
    
    self.window.Visible = true
    self.window.Size = UDim2.new(0, CONFIG.WINDOW_WIDTH, 0, 0)
    self.window.Position = UDim2.new(0.5, -CONFIG.WINDOW_WIDTH/2, 0.5, 0)
    
    tween(self.window, {
        Size = UDim2.new(0, CONFIG.WINDOW_WIDTH, 0, CONFIG.WINDOW_HEIGHT),
        Position = UDim2.new(0.5, -CONFIG.WINDOW_WIDTH/2, 0.5, -CONFIG.WINDOW_HEIGHT/2)
    }, 0.25)
    
    self.fabButton.Visible = false
end

function ElegantModMenu:hide()
    if not self.window.Visible then return end
    
    -- Ð—Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ð²ÑÐµ Ð¾ÐºÐ½Ð° Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº
    if self.espSettingsWindow then
        self.espSettingsWindow:Destroy()
        self.espSettingsWindow = nil
    end
    
    if self.aimSettingsWindow then
        self.aimSettingsWindow:Destroy()
        self.aimSettingsWindow = nil
    end
    
    if self.settingsWindow then
        self.settingsWindow:Destroy()
        self.settingsWindow = nil
    end
    
    tween(self.window, {
        Size = UDim2.new(0, CONFIG.WINDOW_WIDTH, 0, 0),
        Position = UDim2.new(0.5, -CONFIG.WINDOW_WIDTH/2, 0.5, 0)
    }, 0.2)
    
    task.delay(0.2, function()
        self.window.Visible = false
        self.fabButton.Visible = true
    end)
end

-- ÐŸÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹
function ElegantModMenu:destroy()
    if self.screenGui then
        self.screenGui:Destroy()
    end
end

function ElegantModMenu:setVisible(visible)
    if visible then
        self:show()
    else
        self:hide()
    end
end

-- ÐŸÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹ Ð´Ð»Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²
function ElegantModMenu:addButton(sectionName, name, callback, icon)
    for _, section in ipairs(self.sections) do
        if section.name == sectionName then
            if self.activeSection == sectionName then
                return self:button(name, callback, icon)
            end
            break
        end
    end
end

function ElegantModMenu:addToggle(sectionName, name, defaultState, callback, icon)
    for _, section in ipairs(self.sections) do
        if section.name == sectionName then
            if self.activeSection == sectionName then
                return self:toggle(name, defaultState, callback, icon)
            end
            break
        end
    end
end

function ElegantModMenu:addSlider(sectionName, name, min, max, defaultValue, callback, icon)
    for _, section in ipairs(self.sections) do
        if section.name == sectionName then
            if self.activeSection == sectionName then
                return self:slider(name, min, max, defaultValue, callback, icon)
            end
            break
        end
    end
end

function ElegantModMenu:addDropdown(sectionName, name, options, defaultValue, callback, icon)
    for _, section in ipairs(self.sections) do
        if section.name == sectionName then
            if self.activeSection == sectionName then
                return self:dropdown(name, options, defaultValue, callback, icon)
            end
            break
        end
    end
end

-- Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚
return ElegantModMenu
